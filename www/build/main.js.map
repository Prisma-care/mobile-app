{"version":3,"sources":["../../src/app/storyList/component/createOrUpdateStory/createOrUpdateStory.component.ts","../../src/app/storyList/component/storyDetail/storyDetail.component.ts","../../src/app/core/topic.service.ts","../../src/app/auth/authentication.component.ts","../../src/app/shared/shared.module.ts","../../src/environments/environment.ts","../../src/app/di.ts","../../src/app/storyList/component/storyListOptions.component.ts","../../src/app/storyList/component/topic-popover/topic-popover.component.ts","../../src/app/core/fullstory.service.ts","../../node_modules/@angular/core/@angular lazy","../../src lazy","../../src/app/core/patient.service.ts","../../src/app/core/authentication.service.ts","../../src/app/core/user.service.ts","../../src/app/root.component.ts","../../src/app/storyList/storyList.component.ts","../../src/app/storyList/component/storyDetail/component/storyOptions.component.ts","../../src/app/storyList/printList.component.ts","../../src/app/shared/provider/util.service.ts","../../src/app/auth/components/intro/intro.component.ts","../../src/app/auth/components/new-lovedone/new-lovedone.ts","../../src/app/auth/components/password-reset/password-reset.component.ts","../../src/app/sidebar/component/invite/invite.ts","../../src/app/sidebar/component/giveFeedback/giveFeedback.component.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/app/app.component.ts","../../src/shared/constant.ts","../../src/app/core/mixpanel.service.ts","../../src/app/core/album.service.ts","../../src/app/core/story.service.ts","../../src/shared/utils.ts","../../src/app/albumList/albumList.component.ts","../../src/shared/question.ts","../../src/app/core/core.module.ts","../../src/app/core/interceptors/authentication.interceptor.ts","../../src/app/core/interceptors/common-headers.interceptor.ts","../../src/app/core/interceptors/unauthorized-error.interceptor.ts","../../src/app/core/interceptors/invalid-token.interceptor.ts","../../src/app/core/interceptors/network.interceptor.ts","../../src/app/auth/auth.module.ts","../../src/app/auth/components/authentication-header.component.ts","../../src/app/auth/components/authentication-register.component.ts","../../src/app/auth/components/authentication-login.component.ts","../../src/app/shared/component/albumOrStory.component.ts","../../src/shared/types.ts","../../src/app/shared/directive/toggleFullscreen.directive.ts","../../src/app/shared/directive/ifFullscreen.directive.ts","../../src/app/shared/directive/ifPlatform.directive.ts","../../src/app/shared/component/fullscreenButton.component.ts","../../src/app/albumList/album.module.ts","../../src/app/storyList/story.module.ts","../../src/app/storyList/component/question/question.component.ts","../../src/app/sidebar/sidebar.module.ts","../../src/app/sidebar/sidebar.component.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["import {Component, OnInit, Inject, ChangeDetectorRef} from '@angular/core';\nimport {NavParams} from 'ionic-angular/navigation/nav-params';\nimport {Album, Story, User, Patient, Constant} from '../../../../shared/types';\nimport {ConstantToken} from '../../../di';\nimport {DomSanitizer, SafeUrl} from '@angular/platform-browser';\nimport {StoryService} from '../../../core/story.service';\nimport {MixpanelService} from '../../../core/mixpanel.service';\nimport {PatientService} from '../../../core/patient.service';\nimport {UserService} from '../../../core/user.service';\nimport {StoryDetailsComponent} from '../storyDetail/storyDetail.component';\nimport {NavController} from 'ionic-angular/navigation/nav-controller';\nimport {ViewController} from 'ionic-angular/navigation/view-controller';\nimport {TransferObject, Transfer} from '@ionic-native/transfer';\nimport {LoadingController, Loading} from 'ionic-angular';\nimport {ToastController} from 'ionic-angular/components/toast/toast-controller';\nimport {map, switchMap} from 'rxjs/operators';\nimport {Observable} from 'rxjs/Observable';\n\n@Component({\n  selector: 'prisma-create-update-story',\n  template: `\n    <ion-header>\n    <ion-navbar>\n        <ion-title>{{title}}</ion-title>\n    </ion-navbar>\n    </ion-header>\n\n    <ion-content padding>\n    <ion-item-group>\n        <br>\n        <!-- Add Youtube story -->\n        <h2 class=\"plak-een-youtube-lin\" *ngIf=\"method===constant.methods.addYoutubeStory\">Plak een Youtube link om de\n        video toe te voegen.</h2>\n        <h2 class=\"plak-een-youtube-lin\" *ngIf=\"method===constant.methods.addFileStory\">Upload een foto van je toestel</h2>\n\n        <!-- Add description story -->\n        <ion-item style=\"padding-left: 0\"></ion-item>\n        <ion-item *ngIf=\"method !== constant.methods.addYoutubeStory\">\n            <ion-textarea autofocus class=\"story-text\" placeholder=\"{{placeHolder}}\" [(ngModel)]=\"story.description\" rows=\"7\"\n                        clearInput></ion-textarea>\n        </ion-item>\n        <!-- Add Youtube Story -->\n        <ion-item *ngIf=\"method===constant.methods.addYoutubeStory\" style=\"padding-left: 0\">\n            <ion-textarea autofocus class=\"story-text\" placeholder=\"{{youtubeLinkPlaceHolder}}\"\n            (ngModelChange)=\"checkYoutubeLink($event)\"\n            [(ngModel)]=\"story.source\"\n            rows=\"3\" style=\"padding-left: 0\"\n            clearInput></ion-textarea>\n        </ion-item>\n        <!-- Add File Story -->\n        <ion-item *ngIf=\"method===constant.methods.addFileStory\" >\n          <input type=\"file\" accept=\".jpg,.jpeg,.png,.gif\" name=\"asset\" #fileselector\n            (change)=\"registerFile(fileselector.files[0])\" style=\"padding-left: 0\" />\n        </ion-item>\n        <ion-item>\n          <ion-thumbnail class=\"thumbnail\" style=\"padding-left: 7%;\" *ngIf=\"method===constant.methods.addYoutubeStory\">\n              <img *ngIf=\"isLoading\" [src]=\"image\">\n              <ion-spinner *ngIf=\"!isLoading\" item-start name=\"dots\" color=\"grey\"></ion-spinner>\n          </ion-thumbnail>\n        </ion-item>\n\n        <button ion-button solid block full large color=\"primary\" (click)=\"commit()\"\n          [disabled]=\"!isLoading\">\n          <ion-icon name=\"checkmark\"></ion-icon>\n        </button>\n\n    </ion-item-group>\n    </ion-content>\n\n  `\n})\nexport class CreateOrUpdateStoryComponent implements OnInit {\n  file: any;\n  method: string;\n  dataUrl: string;\n  image: SafeUrl;\n  album: Album;\n  story: Story;\n  title = 'Vul het verhaal aan';\n  assetEndpoint: string;\n\n  placeHolder = `Schrijf het verhaal.\\n Hoe meer details hoe beter.`;\n  youtubeLinkPlaceHolder = 'https://www.youtube.com/watch?v=ffSnk4v3aeg';\n\n  loading: Loading;\n  isLoading: Boolean = false;\n  currentPatient: Patient;\n  currentUser: User;\n\n  methods = {\n    [this.constant.methods.addNewStory]: {\n      init: () => {\n        this.story = this.initStory({\n          type: 'image'\n        });\n        this.isLoading = true;\n      },\n      send: () => {\n        this.addStory().subscribe((addedStory: Story) => {\n          this.uploadImage(\n            this.currentPatient.patient_id,\n            addedStory.id,\n            this.dataUrl\n          );\n        });\n      }\n    },\n    [this.constant.methods.addFileStory]: {\n      init: () => {\n        this.title = 'Upload een foto';\n        this.story = this.initStory({\n          type: 'image'\n        });\n        this.isLoading = true;\n      },\n      send: () => {\n        this.addStory().subscribe((addedStory: Story) => {\n          const fd = new FormData();\n          fd.append('asset', this.file);\n          this.loading = this.loadingCtrl.create({\n            content: 'Uploading...'\n          });\n          this.loading.present();\n          this.storyService\n            .addFile(this.currentPatient.patient_id, addedStory.id, fd)\n            .subscribe(() => {\n              this.loading.dismissAll();\n              this.navCtrl.pop();\n            });\n        });\n      }\n    },\n    [this.constant.methods.addYoutubeStory]: {\n      init: () => {\n        this.title = 'Kies video van Youtube';\n        this.story = this.initStory({\n          type: 'youtube',\n          description: 'Video van Youtube'\n        });\n      },\n      send: () => {\n        if (this.isLoading) {\n          this.addStory()\n            .pipe(\n              map((addedStory: Story) =>\n                this.storyService.addYoutubeLinkAsset(\n                  this.currentPatient.patient_id,\n                  addedStory.id,\n                  this.story.source\n                )\n              ),\n              switchMap((x: Observable<Object | Error>) => x)\n            )\n            .subscribe(() => {\n              let truncatedDescription = '';\n              if (this.story.description) {\n                truncatedDescription = `'${this.story.description.substring(\n                  0,\n                  Math.min(this.story.description.length, 30)\n                )}...'`;\n              }\n              this.toastCtrl\n                .create({\n                  message: `YouTube-video ${truncatedDescription} toegevoegd`,\n                  duration: 3000,\n                  position: 'bottom'\n                })\n                .present();\n              this.navCtrl.pop();\n            });\n        } else {\n          this.toastCtrl\n            .create({\n              message: 'Ongeldige YouTube link',\n              duration: 3000,\n              position: 'bottom'\n            })\n            .present();\n        }\n      }\n    },\n    [this.constant.methods.replaceDescription]: {\n      init: () => {\n        this.isLoading = true;\n      },\n      send: () => {\n        this.updateDescription();\n      }\n    }\n  };\n\n  constructor(\n    @Inject(ConstantToken) private constant: Constant,\n    private navParams: NavParams,\n    private sanitizer: DomSanitizer,\n    private storyService: StoryService,\n    private mixpanel: MixpanelService,\n    private patientService: PatientService,\n    private userService: UserService,\n    private navCtrl: NavController,\n    private viewCtrl: ViewController,\n    private transfer: Transfer,\n    private loadingCtrl: LoadingController,\n    private toastCtrl: ToastController,\n    private changeDetect: ChangeDetectorRef\n  ) {}\n\n  ngOnInit(): void {\n    this.method = this.navParams.get('method');\n    this.dataUrl = this.navParams.get('dataUrl');\n    this.album = this.navParams.get('album') as Album;\n    this.story = {...this.navParams.get('story')} as Story;\n    this.currentPatient = this.patientService.getCurrentPatient();\n    this.currentUser = this.userService.getCurrentUser();\n    this.methods[this.method].init();\n  }\n\n  commit() {\n    this.methods[this.method].send();\n  }\n\n  updateDescription() {\n    this.storyService\n      .updateStory(this.currentPatient.patient_id, this.story)\n      .subscribe(() => {\n        this.mixpanel.track('NewStoryComponent::updateDescription', {\n          email: this.currentUser.email,\n          patient_id: this.currentPatient.patient_id,\n          updatedStory: this.story,\n          selectedAlbum: this.album\n        });\n\n        this.navCtrl.push(StoryDetailsComponent, {\n          album: this.album,\n          story: this.story\n        });\n\n        this.navCtrl.remove(this.viewCtrl.index - 1, 2);\n      });\n  }\n\n  initStory(params) {\n    return {\n      ...this.story,\n      ...params,\n      albumId: this.album.id,\n      creatorId: this.currentUser.id\n    };\n  }\n\n  addStory() {\n    return this.storyService\n      .addStory(this.currentPatient.patient_id, this.story)\n      .pipe(\n        map((addedStory: Story) => {\n          this.mixpanel.track('NewStoryComponent::saving story', {\n            email: this.currentUser.email,\n            patient_id: this.currentPatient.patient_id,\n            newStory: this.story,\n            selectedAlbum: this.album\n          });\n          return addedStory;\n        })\n      );\n  }\n\n  checkYoutubeLink(value) {\n    this.storyService\n      .checkYoutubeLink(value)\n      .subscribe(\n        (res: {thumbnail: string; description: string; title: string}) => {\n          if (res) {\n            this.image = this.sanitizer.bypassSecurityTrustUrl(res.thumbnail);\n            this.story = {...this.story, description: res.title};\n            this.isLoading = true;\n          } else {\n            this.image = '';\n            this.isLoading = false;\n          }\n        }\n      );\n  }\n\n  registerFile(file) {\n    this.file = file;\n  }\n\n  private getAssetEndpoint(storyId: number, patientId: number): string {\n    return `${this.constant.apiUrl}/${\n      this.constant.api.getPatient\n    }/${patientId}/${this.constant.api.getStory}/${storyId}/${\n      this.constant.api.getAsset\n    }`;\n  }\n\n  uploadImage(patientId: number, storyId: number, lastImage: string) {\n    const url = this.getAssetEndpoint(storyId, patientId);\n    const options = {\n      fileKey: 'asset',\n      fileName: 'asset',\n      mimeType: 'image/jpeg',\n      headers: {\n        Connection: 'close',\n        Authorization: 'Bearer ' + localStorage.getItem(this.constant.jwtToken)\n      }\n    };\n\n    const fileTransfer: TransferObject = this.transfer.create();\n\n    this.loading = this.loadingCtrl.create({\n      content: 'Uploading...'\n    });\n    this.loading.present();\n    const targetPath = lastImage;\n\n    fileTransfer.upload(targetPath, url, options).then(\n      () => {\n        this.loading.dismissAll();\n        this.navCtrl.pop();\n      },\n      () => {\n        this.loading.dismissAll();\n        this.navCtrl.pop();\n      }\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/storyList/component/createOrUpdateStory/createOrUpdateStory.component.ts","import {Component, Inject, OnInit, ViewChild} from '@angular/core';\nimport {Album, Story, Constant} from '../../../../shared/types';\nimport {\n  NavController,\n  NavParams,\n  PopoverController,\n  ViewController,\n  ToastController\n} from 'ionic-angular';\n\nimport {MixpanelService} from '../../../core/mixpanel.service';\nimport {NativeTransitionOptions} from '@ionic-native/native-page-transitions';\nimport {DomSanitizer, SafeUrl} from '@angular/platform-browser';\nimport {StoryOptionsComponent} from './component/storyOptions.component';\nimport {YoutubeVideoPlayer} from '@ionic-native/youtube-video-player';\nimport {StoryService} from '../../../core/story.service';\nimport {PatientService} from '../../../core/patient.service';\nimport {Subject, pipe} from 'rxjs/Rx';\nimport {takeUntil} from 'rxjs/operators';\nimport {ConstantToken} from '../../../di';\nimport {Content} from 'ionic-angular/navigation/nav-interfaces';\nimport {CreateOrUpdateStoryComponent} from '../createOrUpdateStory/createOrUpdateStory.component';\nimport {OnDestroy} from '@angular/core/src/metadata/lifecycle_hooks';\nimport * as screenfull from 'screenfull';\n\n@Component({\n  selector: 'prisma-story-detail',\n  templateUrl: `./storyDetail.component.html`\n})\nexport class StoryDetailsComponent implements OnInit, OnDestroy {\n  @ViewChild('content') content: Content;\n\n  destroy$: Subject<boolean> = new Subject<boolean>();\n  album: Album;\n  story: Story;\n  backgroundImage: SafeUrl;\n  source: SafeUrl;\n  takenUntilPipe = pipe(takeUntil(this.destroy$));\n  showControls = true;\n  showDescription = false;\n  keyf: (() => void);\n  // needs a bound variable in order to avoid change detection that re-inserts the YouTube src\n  // on a random page modification\n  safeYoutubeUrl: SafeUrl;\n\n  constructor(\n    @Inject(ConstantToken) private constant: Constant,\n    private navParams: NavParams,\n    private mixpanel: MixpanelService,\n    private sanitizer: DomSanitizer,\n    private popoverCtrl: PopoverController,\n    private youtube: YoutubeVideoPlayer,\n    private storyService: StoryService,\n    private patientService: PatientService,\n    private navCtrl: NavController,\n    private viewCtrl: ViewController,\n    public toastCtrl: ToastController\n  ) {}\n\n  ngOnInit(): void {\n    this.mixpanel.track('StoryDetailsPage::view', {\n      story: this.story\n    });\n    this.album = this.navParams.get('album') as Album;\n    this.story = this.navParams.get('story') as Story;\n    this.backgroundImage = this.sanitizer.bypassSecurityTrustUrl(\n      this.story.backgroundImage\n    );\n    if (this.story.type === 'youtube') {\n      this.source = this.sanitizer.bypassSecurityTrustResourceUrl(\n        this.story.source\n      );\n      this.setYoutubeUrl(this.story.source);\n      this.showControls = true;\n    } else {\n      this.showControls = false;\n    }\n    if (screenfull.enabled) {\n      screenfull.request();\n    }\n  }\n\n  ngOnDestroy(): void {\n    document.removeEventListener('keyup', this.keyEvent.bind(this));\n    this.destroy$.next(true);\n    this.destroy$.unsubscribe();\n  }\n\n  ionViewWillEnter() {\n    this.content.resize();\n  }\n\n  ionViewDidEnter() {\n    this.keyf = this.keyEvent.bind(this);\n    document.addEventListener('keyup', this.keyf);\n  }\n\n  ionViewWillLeave() {\n    document.removeEventListener('keyup', this.keyf);\n  }\n\n  keyEvent(e) {\n    if (e.keyCode === 37) {\n      this.previous();\n    } else if (e.keyCode === 39) {\n      this.next();\n    }\n  }\n\n  swipeEvent(e) {\n    if (this.album.stories.length > 1) {\n      const options: NativeTransitionOptions = {\n        direction: 'up',\n        duration: 500,\n        slowdownfactor: 3,\n        slidePixels: 20,\n        iosdelay: 100,\n        androiddelay: 150\n      };\n      // swipes left\n      if (e.direction === 4) {\n        options.direction = 'right';\n        this.previous();\n      }\n\n      // swipes right\n      if (e.direction === 2) {\n        options.direction = 'left';\n        this.next();\n      }\n    }\n  }\n\n  next(): void {\n    const nextStory = this.album.stories[\n      (this.album.stories.findIndex(story => this.story.id === story.id) + 1) %\n        this.album.stories.length\n    ];\n    this.storyService\n      .getBackground(nextStory)\n      .let(this.takenUntilPipe)\n      .subscribe(imageUrl => {\n        this.navCtrl.push(StoryDetailsComponent, {\n          album: this.album,\n          story: {\n            ...nextStory,\n            backgroundImage: imageUrl\n          }\n        });\n        this.navCtrl.remove(this.viewCtrl.index);\n      });\n  }\n\n  previous(): void {\n    const index =\n      this.album.stories.findIndex(story => this.story.id === story.id) === 0\n        ? this.album.stories.length - 1\n        : this.album.stories.findIndex(story => this.story.id === story.id) - 1;\n    const previousStory = this.album.stories[index];\n    this.storyService\n      .getBackground(previousStory)\n      .let(this.takenUntilPipe)\n      .subscribe(imageUrl => {\n        this.navCtrl.push(StoryDetailsComponent, {\n          album: this.album,\n          story: {\n            ...previousStory,\n            backgroundImage: imageUrl\n          }\n        });\n        this.navCtrl.remove(this.viewCtrl.index);\n      });\n  }\n\n  toggleFavorite(): void {\n    this.story.favorited = !this.story.favorited;\n    this.storyService\n      .updateStory(\n        this.patientService.getCurrentPatient().patient_id,\n        this.story\n      )\n      .let(this.takenUntilPipe)\n      .subscribe();\n  }\n\n  toggleControls(): void {\n    if (this.showDescription) {\n      this.toggleDescription();\n    } else if (!(this.story.type === 'youtube')) {\n      // only hide controls when it is not a YouTube video\n      this.showControls = !this.showControls;\n    }\n  }\n\n  toggleDescription(): void {\n    this.showDescription = !this.showDescription;\n  }\n\n  openYoutubeVideo(url: string) {\n    this.youtube.openVideo(this.storyService.getYoutubeId(url));\n  }\n\n  setYoutubeUrl(url: string): void {\n    const resourceUrl = `https://www.youtube.com/embed/${this.storyService.getYoutubeId(\n      url\n    )}?fs=0&autoplay=1&rel=0&showinfo=0&disablekb=1`;\n    this.safeYoutubeUrl = this.sanitizer.bypassSecurityTrustResourceUrl(\n      resourceUrl\n    );\n  }\n\n  editDescription(story: Story) {\n    this.mixpanel.track('StoryDetailsPage::editDescription', {\n      story\n    });\n\n    this.navCtrl.push(CreateOrUpdateStoryComponent, {\n      album: this.album,\n      story,\n      method: this.constant.methods.replaceDescription,\n      dataUrl: story.backgroundImage\n    });\n  }\n\n  showMore(event: Event): void {\n    const popover = this.popoverCtrl.create(\n      StoryOptionsComponent,\n      {\n        story: this.story,\n        navCtrl: this.navCtrl\n      },\n      {cssClass: 'storyDetail-popover'}\n    );\n\n    const toast = (message: string) =>\n      this.toastCtrl\n        .create({\n          message,\n          duration: 3000,\n          position: 'bottom'\n        })\n        .present();\n\n    popover.onDidDismiss(dismissData => {\n      if (dismissData === 'deleteSuccess') {\n        toast('Het verhaal is verwijderd.');\n        this.navCtrl.pop();\n      }\n      if (dismissData === 'deleteError') {\n        toast('Het verhaal kon niet verwijderd worden.');\n      }\n    });\n    popover.present({\n      ev: event\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/storyList/component/storyDetail/storyDetail.component.ts","import {Injectable} from '@angular/core';\nimport {QUESTIONS} from '../../shared/question';\n\n@Injectable()\nexport class TopicService {\n  private questions = QUESTIONS;\n\n  constructor() {}\n\n  getQuestions(query: string): string[] {\n    const matchingCategories = this.questions.filter(category =>\n      this.containsQuery(query, category.keywords)\n    );\n\n    if (matchingCategories.length > 0) {\n      return [].concat.apply([], matchingCategories.map(mc => mc.questions));\n    } else {\n      return [];\n    }\n  }\n\n  hasQuestions(query: string): boolean {\n    return this.getQuestions(query).length > 0;\n  }\n\n  containsQuery(query: string, keywords: string[]): boolean {\n    return Boolean(\n      keywords.find(kw => {\n        const reg = new RegExp(kw.toLowerCase());\n        return reg.test(query.toLowerCase());\n      })\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/core/topic.service.ts","import {Component, OnInit} from '@angular/core';\nimport {AlertController, MenuController, NavController} from 'ionic-angular';\nimport {NewLovedoneComponent} from './components/new-lovedone/new-lovedone';\nimport {AlbumListComponent} from '../albumList/albumList.component';\nimport {NavParams} from 'ionic-angular/navigation/nav-params';\n\n@Component({\n  selector: 'prisma-authentication',\n  template: `\n    <ion-header>\n      <prisma-authentication-header [title]=\"title\"></prisma-authentication-header>\n    </ion-header>\n    <ion-content no-bounce>\n      <!--  Login case -->\n      <prisma-authentication-login\n        *ngIf=\"!isLogging\"\n        [onRegisterClick]=\"toggleForm\"\n        [onComplete]=\"onLoginComplete\"\n      ></prisma-authentication-login>\n      <prisma-authentication-register\n        *ngIf=\"isLogging\"\n        [onLoginClick]=\"toggleForm\"\n        [onComplete]=\"onRegisterComplete\"\n      ></prisma-authentication-register>\n    </ion-content>\n  `\n})\nexport class AuthenticationComponent implements OnInit {\n  isLogging = false;\n  title: string;\n\n  constructor(\n    private navCtrl: NavController,\n    private menuCtrl: MenuController,\n    private navParams: NavParams,\n    private alertCtrl: AlertController\n  ) {\n    this.toggleForm = this.toggleForm.bind(this);\n    this.onLoginComplete = this.onLoginComplete.bind(this);\n    this.onRegisterComplete = this.onRegisterComplete.bind(this);\n  }\n\n  ngOnInit(): void {\n    this.isLogging = this.navParams.get('isLogging');\n    this.isLogging ? (this.title = 'Registreer') : (this.title = 'Meld je aan');\n  }\n\n  ionViewDidEnter() {\n    const error = this.navParams.get('error');\n    if (error) {\n      this.alertCtrl\n        .create({\n          title: error,\n          buttons: ['Ok']\n        })\n        .present();\n    }\n  }\n\n  ionViewWillEnter() {\n    this.menuCtrl.enable(false);\n  }\n\n  ionViewDidLeave() {\n    this.menuCtrl.enable(true);\n  }\n\n  toggleForm() {\n    this.isLogging = !this.isLogging;\n    this.isLogging ? (this.title = 'Registreer') : (this.title = 'Meld je aan');\n  }\n\n  onLoginComplete() {\n    this.navCtrl.setRoot(AlbumListComponent);\n  }\n\n  onRegisterComplete() {\n    this.navCtrl.setRoot(NewLovedoneComponent);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/auth/authentication.component.ts","import {NgModule} from '@angular/core';\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\nimport {IonicModule} from 'ionic-angular';\nimport {AlbumOrStoryComponent} from './component/albumOrStory.component';\nimport {ToggleFullscreenDirective} from './directive/toggleFullscreen.directive';\nimport {IfFullscreenDirective} from './directive/ifFullscreen.directive';\nimport {IfPlatformDirective} from './directive/ifPlatform.directive';\nimport {FullscreenButtonComponent} from './component/fullscreenButton.component';\nimport {UtilService} from './provider/util.service';\n\nconst imports = [ReactiveFormsModule, FormsModule, IonicModule];\nconst declarations = [\n  AlbumOrStoryComponent,\n  ToggleFullscreenDirective,\n  IfFullscreenDirective,\n  FullscreenButtonComponent,\n  IfPlatformDirective\n];\n\n@NgModule({\n  declarations,\n  imports,\n  providers: [UtilService],\n  exports: [...imports, ...declarations]\n})\nexport class SharedModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/shared.module.ts","export interface Environment {\n  currentEnv: string;\n  tracking: boolean;\n  trackingExcluded: string[];\n  apiUrl: string;\n  youtubeApiKey: string;\n  defaultUsername: string;\n  defaultPassword: string;\n}\n\nexport const environment = {\n  // These statements are preprocessed by gulp\n  // eg. run 'gulp develop' to export this part as the environment.\n\n  currentEnv: 'develop',\n  tracking: false,\n\n\n  // insert email addresses you want to exclude from\n  // mixpanel tracking in your build here\n  trackingExcluded: [],\n\n  // insert a valid Prisma API URL\n  apiUrl: 'https://api.prisma.care/v1',\n\n  // insert a valid YouTube API key\n  youtubeApiKey: 'AIzaSyBM2EOi6BBvWiam_jWfiQCM6pKWo8cnTIM',\n  defaultUsername: 'open@prisma.care',\n  defaultPassword: 'iedereen'\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/environments/environment.ts","import {InjectionToken, Provider} from '@angular/core';\nimport {Constant} from '../shared/types';\nimport {constant} from '../shared/constant';\n\nexport const ConstantToken = new InjectionToken<Constant>('constant');\n\nexport const ConstantProvider: Provider = {\n  provide: ConstantToken,\n  useValue: constant\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/di.ts","import {Component} from '@angular/core';\nimport {NavParams} from 'ionic-angular/navigation/nav-params';\nimport {ViewController} from 'ionic-angular/navigation/view-controller';\nimport {AlbumService} from '../../core/album.service';\nimport {PatientService} from '../../core/patient.service';\nimport {IfFullscreenDirective} from '../../shared/directive/ifFullscreen.directive';\nimport {ToggleFullscreenDirective} from '../../shared/directive/toggleFullscreen.directive';\nimport {IfPlatformDirective} from '../../shared/directive/ifPlatform.directive';\nimport {AlertController} from 'ionic-angular/components/alert/alert-controller';\nimport {AuthenticationService} from '../../core/authentication.service';\nimport {NavController} from 'ionic-angular/navigation/nav-controller';\nimport {RootComponent} from '../../root.component';\nimport {UserService} from '../../core/user.service';\n\n@Component({\n  selector: 'prisma-story-list-options',\n  template: `\n    <ion-list class=\"list\">\n      <ion-item padding\n      (click)=\"this.userService.registrationGuard(this.actionSheet.bind(this),\n      this.showRegisterPrompt.bind(this, 'een verhaal toe te voegen'))\">\n        <ion-icon class=\"bar-icon\" name=\"md-add\"></ion-icon>\n        <p class=\"contenu\">Voeg verhaal toe</p>\n      </ion-item>\n      <ion-item padding\n        (click)=\"this.userService.registrationGuard(this.confirmDeletion.bind(this),\n        this.showRegisterPrompt.bind(this, 'een album te verwijderen'))\">\n        <ion-icon class=\"trash-icon\" name=\"md-trash\"></ion-icon>\n        <p class=\"contenu\">Verwijder album</p>\n      </ion-item>\n      <ion-item padding *prismaIfPlatform='\"notCordova\"' prismaToggleFullscreen (click)=\"dismiss()\">\n        <ion-icon *prismaIfFullscreen=\"false\" class=\"trash-icon\" name=\"md-expand\"></ion-icon>\n        <ion-icon *prismaIfFullscreen=\"true\" class=\"trash-icon\" name=\"md-contract\"></ion-icon>\n        <p *prismaIfFullscreen=\"false\" class=\"contenu\">Volledig scherm</p>\n        <p *prismaIfFullscreen=\"true\" class=\"contenu\">Terug klein scherm</p>\n      </ion-item>\n    </ion-list>\n  `\n})\nexport class StoryListOptionsComponent {\n  navCtrl: NavController = null;\n  constructor(\n    private navParams: NavParams,\n    private viewCtrl: ViewController,\n    private albumService: AlbumService,\n    private patientService: PatientService,\n    private alertCtrl: AlertController,\n    private authService: AuthenticationService,\n    private userService: UserService\n  ) {\n    this.navCtrl = this.navParams.get('navCtrl');\n  }\n\n  actionSheet() {\n    this.navParams.get('actionSheet')();\n    this.viewCtrl.dismiss();\n  }\n\n  dismiss(): void {\n    this.viewCtrl.dismiss();\n  }\n\n  deleteAlbum(): void {\n    this.albumService\n      .deleteAlbum(\n        this.patientService.getCurrentPatient().patient_id,\n        this.navParams.get('album').id\n      )\n      .subscribe(\n        () => {\n          this.viewCtrl.dismiss('deleteSuccess');\n        },\n        () => {\n          this.viewCtrl.dismiss('deleteError');\n        }\n      );\n  }\n\n  showRegisterPrompt(intentionText): void {\n    const alert = this.alertCtrl.create({\n      title: 'Meld je aan',\n      subTitle: `Meld je aan om ${intentionText}. Zo kan je je bewerkingen bijhouden.`,\n      buttons: [\n        {\n          text: 'Ga terug'\n        },\n        {\n          text: 'Meld je aan',\n          handler: () => {\n            this.authService.logout();\n            this.viewCtrl.dismiss();\n            this.navCtrl.setRoot(RootComponent, {isLogging: true});\n          }\n        }\n      ]\n    });\n    alert.present();\n  }\n\n  confirmDeletion(): void {\n    this.alertCtrl.create({\n        title: 'Album verwijderen',\n        subTitle:\n          `Ben je zeker dat je het album '${this.navParams.get('album').title}' wilt verwijderen?`,\n        buttons: [{\n          text: 'Ja',\n          handler: (data) => {this.deleteAlbum(); }\n        }, 'Annuleer']\n      }).present();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/storyList/component/storyListOptions.component.ts","import {Component} from '@angular/core';\nimport {NavParams} from 'ionic-angular/navigation/nav-params';\n\n/**\n * Generated class for the TopicPopoverComponent component.\n *\n * See https://angular.io/api/core/Component for more info on Angular\n * Components.\n */\n@Component({\n  selector: 'prisma-topic-popover',\n  templateUrl: 'topic-popover.component.html'\n})\nexport class TopicPopoverComponent {\n  topicQuery: '';\n\n  constructor(private params: NavParams) {\n    this.topicQuery = this.params.get('topicQuery');\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/storyList/component/topic-popover/topic-popover.component.ts","import {Injectable} from '@angular/core';\nimport {Http} from '@angular/http';\nimport 'rxjs/add/operator/map';\nimport {User} from '../../shared/types';\n\n/*\n  Generated class for the FullstoryProvider provider.\n\n  See https://angular.io/guide/dependency-injection for more info on providers\n  and Angular DI.\n*/\n@Injectable()\nexport class FullstoryService {\n  identify(user: User) {\n    // This is an example script - don't forget to change it!\n\n    if ('FS' in window) {\n      window['FS'].identify(String(user.id), {\n        displayName: `${user.firstName} ${user.lastName}`,\n        email: user.email\n      });\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/core/fullstory.service.ts","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 214;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/@angular lazy\n// module id = 214\n// module chunks = 0","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 256;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 256\n// module chunks = 0","import {Inject, Injectable} from '@angular/core';\nimport {ConstantToken} from '../di';\nimport {HttpClient, HttpErrorResponse} from '@angular/common/http';\nimport {Observable, pipe} from 'rxjs/Rx';\nimport {map, catchError} from 'rxjs/operators';\nimport {getMessageFromBackendError} from '../../shared/utils';\nimport {Patient, Constant} from '../../shared/types';\nimport {BehaviorSubject} from 'rxjs/BehaviorSubject';\n\ninterface PatientResponse {\n  response: {\n    patient_id: number;\n    firstName: string;\n    lastName: string;\n  };\n}\n\n@Injectable()\nexport class PatientService {\n  patientPipe = pipe(\n    map(({response}: PatientResponse) => response as Patient),\n    catchError(this.handleError)\n  );\n\n  _patientExists = new BehaviorSubject<boolean>(false);\n\n  constructor(\n    @Inject(ConstantToken) private constant: Constant,\n    private http: HttpClient\n  ) {\n    this.handleError = this.handleError.bind(this);\n  }\n\n  getPatient(id: number): Observable<Patient | Error> {\n    return this.http\n      .get(`${this.constant.apiUrl}/${this.constant.api.getPatient}/${id}`)\n      .let(this.patientPipe);\n  }\n\n  addPatient(firstName: string, lastName: string): Observable<Patient | Error> {\n    return this.http\n      .post(`${this.constant.apiUrl}/${this.constant.api.getPatient}`, {\n        firstName,\n        lastName\n      })\n      .let(this.patientPipe);\n  }\n\n  patientExistsSync(): boolean {\n    // return Boolean(this.constant.temp.currentPatient);\n    return Boolean(localStorage.getItem(this.constant.temp.currentPatient));\n  }\n\n  patientExists(): Observable<boolean> {\n    return this._patientExists.asObservable();\n  }\n\n  setPatientExists(bool): void {\n    this._patientExists.next(bool);\n  }\n\n  getCurrentPatient(): Patient {\n    return JSON.parse(\n      localStorage.getItem(this.constant.temp.currentPatient)\n    ) as Patient;\n  }\n\n  setPatient(patient: Patient): void {\n    localStorage.setItem(\n      this.constant.temp.currentPatient,\n      JSON.stringify(patient)\n    );\n    if (patient) {\n      this.setPatientExists(true);\n    }\n  }\n\n  handleError(err: HttpErrorResponse): Observable<Error> {\n    return Observable.of(\n      new Error(\n        `${getMessageFromBackendError(\n          err.error && err.error.meta && err.error.meta.message\n        )}\n      `\n      )\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/core/patient.service.ts","import {Inject, Injectable} from '@angular/core';\nimport {ConstantToken} from '../di';\nimport {HttpClient, HttpErrorResponse} from '@angular/common/http';\nimport {Observable, BehaviorSubject} from 'rxjs/Rx';\nimport {map, catchError, switchMap} from 'rxjs/operators';\nimport {User, Patient, UserRegister, Constant} from '../../shared/types';\nimport {getMessageFromBackendError} from '../../shared/utils';\nimport {UserService} from './user.service';\nimport {PatientService} from './patient.service';\n\ninterface LoginResponse {\n  response: {\n    token: string;\n    patients: Patient[];\n    id: string;\n  };\n}\n\n@Injectable()\nexport class AuthenticationService {\n  private _isAuthenticated: BehaviorSubject<boolean> = new BehaviorSubject(\n    false\n  );\n\n  constructor(\n    @Inject(ConstantToken) private constant: Constant,\n    private http: HttpClient,\n    private userService: UserService,\n    private patientService: PatientService\n  ) {\n    this.handleError = this.handleError.bind(this);\n  }\n\n  login(email: string, password: string): Observable<boolean | Error> {\n    const url = `${this.constant.apiUrl}/${this.constant.api.getUser}/${\n      this.constant.api.getSignIn\n    }`;\n    return this.http.post(url, {email, password}).pipe(\n      switchMap(({response: {token, patients, id}}: LoginResponse): Observable<\n        boolean | Error\n      > => {\n        this.setAuthenticationInfoInStorage({\n          token,\n          currentPatient: patients[0],\n          userId: id\n        });\n\n        this._isAuthenticated.next(true);\n        return this._isAuthenticated.asObservable();\n      }),\n      switchMap(isAuthenticated => {\n        return this.userService.getUser().pipe(\n          map((user: User | Error) => {\n            localStorage.setItem(\n              this.constant.temp.currentUser,\n              JSON.stringify(user)\n            );\n            this.userService.setRegistered();\n          }),\n          map(() => isAuthenticated)\n        );\n      }),\n      catchError(this.handleError)\n    );\n  }\n\n  signUp(user: UserRegister): Observable<boolean | Error> {\n    return this.http\n      .post(`${this.constant.apiUrl}/${this.constant.api.getUser}`, user)\n      .pipe(\n        switchMap((res: Object) => this.login(user.email, user.password)),\n        catchError(this.handleError)\n      );\n  }\n\n  resetPassword(email: string): Observable<Object | Error> {\n    return this.http\n      .post(`${this.constant.apiUrl}/reset`, {email})\n      .pipe(catchError(this.handleError));\n  }\n\n  setAuthenticationInfoInStorage({\n    token,\n    currentPatient,\n    userId\n  }: {\n    token: string;\n    currentPatient: any;\n    userId: string;\n  }) {\n    localStorage.setItem(this.constant.jwtToken, token);\n    localStorage.setItem(\n      this.constant.temp.currentPatient,\n      JSON.stringify(currentPatient || '')\n    );\n    if (currentPatient) {\n      this.patientService.setPatientExists(true);\n    }\n    localStorage.setItem(\n      this.constant.temp.currentUser,\n      JSON.stringify({id: userId})\n    );\n  }\n\n  handleError(err: HttpErrorResponse): Observable<Error> {\n    this._isAuthenticated.next(false);\n    return Observable.of(\n      new Error(\n        `${getMessageFromBackendError(\n          err.error && err.error.meta && err.error.meta.message\n        )}\n      `\n      )\n    );\n  }\n\n  get isAuthenticated(): Observable<boolean> {\n    return this._isAuthenticated.asObservable();\n  }\n\n  autoLoad() {\n    if (localStorage.getItem(this.constant.jwtToken)) {\n      this._isAuthenticated.next(true);\n    }\n  }\n\n  logout(): void {\n    this.clearTokens();\n    this._isAuthenticated.next(false);\n  }\n\n  private clearTokens() {\n    localStorage.clear();\n    this.patientService.setPatientExists(false);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/core/authentication.service.ts","import {Inject, Injectable} from '@angular/core';\nimport {ConstantToken} from '../di';\nimport {HttpClient, HttpErrorResponse} from '@angular/common/http';\nimport {Observable, pipe} from 'rxjs/Rx';\nimport {map, catchError} from 'rxjs/operators';\nimport {User, Constant} from '../../shared/types';\nimport {getMessageFromBackendError} from '../../shared/utils';\nimport {BehaviorSubject} from 'rxjs/BehaviorSubject';\n\ninterface UserResponse {\n  response: User;\n}\n\ninterface InvitationData {\n  patientId: number;\n  inviterId: number;\n  firstName: string;\n  lastName: string;\n  email: string;\n}\n\n@Injectable()\nexport class UserService {\n  userPipe = pipe(\n    map(({response}: UserResponse) => response as User),\n    catchError(this.handleError)\n  );\n\n  _isRegistered: BehaviorSubject<boolean> = new BehaviorSubject<boolean>(false);\n  registered: boolean;\n\n  constructor(\n    @Inject(ConstantToken) private constant: Constant,\n    private http: HttpClient\n  ) {\n    this.handleError = this.handleError.bind(this);\n    this._isRegistered.subscribe(reg => (this.registered = reg));\n  }\n\n  get isRegistered(): Observable<boolean> {\n    return this._isRegistered.asObservable();\n  }\n\n  get isRegisteredSync(): boolean {\n    return this._isRegistered.getValue();\n  }\n\n  getUser(): Observable<User | Error> {\n    return this.http\n      .get(`${this.constant.apiUrl}/${this.constant.api.getUser}/`)\n      .let(this.userPipe);\n  }\n\n  addUser(user: User): Observable<User | any> {\n    const url: string = this.constant.api.getUser;\n    return this.http\n      .post(`${this.constant.apiUrl}/${url}`, user)\n      .let(this.userPipe);\n  }\n\n  inviteUser(invitationData: InvitationData): Observable<Object | Error> {\n    const url: string = this.constant.api.invite;\n    const copyInvitationData = {\n      ...invitationData,\n      patientId: invitationData.patientId\n    };\n    return this.http\n      .post(`${this.constant.apiUrl}/${url}`, copyInvitationData)\n      .pipe(catchError(this.handleError));\n  }\n\n  getCurrentUser(): User {\n    return JSON.parse(\n      localStorage.getItem(this.constant.temp.currentUser)\n    ) as User;\n  }\n\n  setRegistered(): void {\n    const user = this.getCurrentUser();\n    if (user) {\n      if (user.email === this.constant.defaultUsername) {\n        this._isRegistered.next(false);\n      } else {\n        this._isRegistered.next(true);\n      }\n    }\n  }\n\n  registrationGuard(intendedAction, redirectAction) {\n    if (this.isRegisteredSync) {\n      intendedAction();\n    } else {\n      redirectAction();\n    }\n  }\n\n  handleError(err: HttpErrorResponse): Observable<Error> {\n    return Observable.of(\n      new Error(\n        `${getMessageFromBackendError(\n          err.error && err.error.meta && err.error.meta.message\n        )}\n      `\n      )\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/core/user.service.ts","import {Component, ViewChild, OnInit, Inject} from '@angular/core';\nimport {Platform, Nav} from 'ionic-angular';\nimport {SplashScreen} from '@ionic-native/splash-screen';\n\nimport {MixpanelService} from './core/mixpanel.service';\nimport {AuthenticationService} from './core/authentication.service';\nimport {PatientService} from './core/patient.service';\nimport {NewLovedoneComponent} from './auth/components/new-lovedone/new-lovedone';\nimport {AlbumService} from './core/album.service';\nimport {AlbumListComponent} from './albumList/albumList.component';\nimport {Network} from '@ionic-native/network';\nimport {IntroComponent} from './auth/components/intro/intro.component';\nimport {ConstantToken} from './di';\nimport {Constant} from '../shared/types';\n\nimport {Observable, Subscription} from 'rxjs/Rx';\nimport {switchMap, timeout, tap} from 'rxjs/operators';\nimport {UserService} from './core/user.service';\nimport {FullstoryService} from './core/fullstory.service';\nimport {NavController} from 'ionic-angular/navigation/nav-controller';\nimport {NavParams} from 'ionic-angular/navigation/nav-params';\n\n@Component({\n  selector: 'prisma-root',\n  template: ``\n})\nexport class RootComponent {\n  private authSub: Subscription;\n  private authObs: Observable<boolean>;\n\n  constructor(\n    private platform: Platform,\n    private splashScreen: SplashScreen,\n    private patientService: PatientService,\n    private userService: UserService,\n    private authService: AuthenticationService,\n    private albumService: AlbumService,\n    private mixpanel: MixpanelService,\n    private fullstory: FullstoryService,\n    private network: Network,\n    private navCtrl: NavController,\n    private navParams: NavParams,\n    @Inject(ConstantToken) private constants: Constant\n  ) {\n    this.authObs = this.authService.isAuthenticated;\n  }\n\n  ionViewWillEnter() {\n    // this.navCtrl.setRoot(IntroComponent);\n    if (!this.navParams.get('isLogging') && this.userService.isRegisteredSync) {\n      this.authService.autoLoad();\n    }\n    this.authSub = this.authObs.subscribe(isAuthenticated => {\n      if (\n        this.network.type !== 'none' &&\n        !this.navParams.get('isLogging') &&\n        this.patientService.patientExistsSync() &&\n        this.patientService._patientExists.getValue()\n      ) {\n        this.albumService.getAlbums(\n          this.patientService.getCurrentPatient().patient_id\n        );\n        if (this.patientService.getCurrentPatient()) {\n          this.navCtrl.setRoot(AlbumListComponent);\n        }\n        // : this.navCtrl.setRoot(NewLovedoneComponent); // logged in, but no Loved One yet? then above would fail...\n      } else if (!this.navParams.get('isLogging')) {\n        // not authenticated, use default account\n        const subAuth = this.authService\n          .login(this.constants.defaultUsername, this.constants.defaultPassword)\n          .pipe(\n            switchMap((res: boolean | Error) => {\n              if (res instanceof Error) {\n                this.mixpanel.track(\n                  'LoginComponent::Login error',\n                  this.constants.defaultUsername\n                );\n                // this.showError(res.message);\n                return Observable.empty();\n              }\n              return Observable.of(res);\n            }),\n            // timeout(10000),\n            tap(() => {\n              this.mixpanel.identify(this.userService.getCurrentUser());\n              this.fullstory.identify(this.userService.getCurrentUser());\n              this.mixpanel.track(\n                'LoginComponent::Login success',\n                this.userService.getCurrentUser().email\n              );\n              this.patientService.getCurrentPatient();\n              this.navCtrl.setRoot(AlbumListComponent);\n            })\n          )\n          .subscribe(() => {\n            subAuth.unsubscribe();\n          });\n      } else {\n        this.navCtrl.setRoot(IntroComponent);\n      }\n\n      this.platform.ready().then(() => {\n        this.splashScreen.hide();\n      });\n    });\n\n    this.mixpanel.track('AppComponent::Prisma launched');\n  }\n\n  ionViewWillLeave() {\n    this.authSub.unsubscribe();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/root.component.ts","import {Component, Inject, OnDestroy, OnInit, ViewChild} from '@angular/core';\nimport {NgClass} from '@angular/common';\nimport {Story, Album, Constant} from '../../shared/types';\nimport {ActionSheetController, NavController, NavParams} from 'ionic-angular';\nimport {AlbumService} from '../core/album.service';\nimport {PatientService} from '../core/patient.service';\nimport {Subject, pipe} from 'rxjs/Rx';\nimport {takeUntil} from 'rxjs/operators';\nimport {ConstantToken} from '../di';\nimport {Content} from 'ionic-angular';\nimport {StoryListOptionsComponent} from './component/storyListOptions.component';\nimport {PopoverController} from 'ionic-angular/components/popover/popover-controller';\nimport {ToastController} from 'ionic-angular/components/toast/toast-controller';\nimport {StoryService} from '../core/story.service';\nimport {CreateOrUpdateStoryComponent} from './component/createOrUpdateStory/createOrUpdateStory.component';\nimport {StoryDetailsComponent} from './component/storyDetail/storyDetail.component';\nimport {TopicPopoverComponent} from './component/topic-popover/topic-popover.component';\nimport _sortBy from 'lodash/sortBy';\nimport {Platform} from 'ionic-angular/platform/platform';\nimport {platform} from 'os';\nimport {TopicService} from '../core/topic.service';\nimport {PrintListComponent} from './printList.component';\nimport {AlertController} from 'ionic-angular/components/alert/alert-controller';\nimport {AuthenticationService} from '../core/authentication.service';\nimport {RootComponent} from '../root.component';\nimport {UserService} from '../core/user.service';\n\n@Component({\n  selector: 'prisma-story-list',\n  template: `\n    <ion-header>\n      <ion-navbar>\n        <ion-title>{{album.title}}</ion-title>\n        <ion-buttons end>\n          <button ion-button icon-only (click)=\"showPrint()\">\n            <ion-icon name=\"print\"></ion-icon>\n          </button>\n          <button ion-button icon-only (click)=\"showMore($event)\">\n            <ion-icon name=\"more\"></ion-icon>\n          </button>\n        </ion-buttons>\n      </ion-navbar>\n    </ion-header>\n    <ion-content #content no-bounce>\n      <ion-scroll scrollY=\"true\" class=\"full-height\">\n        <ion-grid>\n          <ion-row>\n            <ion-col col-6 col-md-4 col-lg-3 *ngFor=\"let story of stories\">\n              <prisma-album-story\n                [getBackground]=\"getBackground\"\n                [album]=\"album\"\n                [story]=\"story\"\n                [showDetails]=\"showDetails\"\n                [emptyAlbum]=\"constant.emptyAlbum\"\n                [isAlbum]=\"false\">\n              </prisma-album-story>\n            </ion-col>\n          </ion-row>\n        </ion-grid>\n        <div class=\"add-new-container\"\n          (click)=\"this.userService.registrationGuard(this.openActionSheet.bind(this),\n          this.showRegisterPrompt.bind(this, 'een verhaal toe te voegen'))\">\n          <div class=\"add-new\">\n            <ion-icon class=\"add-icon\" name=\"md-add\"></ion-icon>\n            <span>Voeg verhaal toe</span>\n          </div>\n        </div>\n      </ion-scroll>\n      <ion-fab left bottom (click)=\"openTopics()\" *ngIf=\"hasTopics\">\n        <button ion-fab class=\"topic-icon\"><img src=\"assets/icon/icon-bulb.svg\" style=\"width:70%;\"/></button>\n      </ion-fab>\n    </ion-content>\n  `\n})\nexport class StoryListComponent implements OnInit, OnDestroy {\n  album: Album;\n  stories: Story[];\n  destroy$: Subject<boolean> = new Subject<boolean>();\n  takenUntilPipe = pipe(takeUntil(this.destroy$));\n  hasTopics = true;\n\n  @ViewChild(Content) content: Content;\n  constructor(\n    @Inject(ConstantToken) private constant: Constant,\n    private navParams: NavParams,\n    private albumService: AlbumService,\n    private patientService: PatientService,\n    private authService: AuthenticationService,\n    private topicService: TopicService,\n    private navCtrl: NavController,\n    private actionsheetCtrl: ActionSheetController,\n    private popoverCtrl: PopoverController,\n    private toastCtrl: ToastController,\n    private storyService: StoryService,\n    private plt: Platform,\n    private alertCtrl: AlertController,\n    private userService: UserService\n  ) {\n    this.getBackground = this.getBackground.bind(this);\n    this.showDetails = this.showDetails.bind(this);\n  }\n\n  ngOnInit(): void {\n    this.album = this.navParams.get('album');\n    this.openActionSheet = this.openActionSheet.bind(this);\n    this.hasTopics = this.topicService.hasQuestions(this.album.title);\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next(true);\n    this.destroy$.unsubscribe();\n  }\n\n  ionViewWillEnter(): void {\n    this.albumService\n      .getAlbum(\n        this.patientService.getCurrentPatient().patient_id,\n        this.album.id\n      )\n      .let(this.takenUntilPipe)\n      .subscribe(album => {\n        this.album = album as Album;\n        this.stories = _sortBy(this.album.stories, [\n          item => !item.favorited,\n          item => -new Date(item.updatedAt.date).getTime()\n        ]);\n      });\n    this.content.resize();\n  }\n\n  ionViewDidEnter(): void {\n    this.content.scrollToTop();\n  }\n\n  getBackground(story: Story) {\n    return this.storyService.getBackground(story);\n  }\n\n  showDetails(album: Album, story: Story) {\n    this.navCtrl.push(StoryDetailsComponent, {\n      album,\n      story\n    });\n  }\n\n  showPrint(): void {\n    this.navCtrl.push(PrintListComponent, {\n      album: this.album\n    });\n  }\n\n  openTopics(): void {\n    const popover = this.popoverCtrl.create(TopicPopoverComponent, {\n      topicQuery: this.album.title\n    });\n    popover.present();\n  }\n\n  openActionSheet(): void {\n    const text2 = 'Maak foto';\n    const text3 = 'Kies foto van camerarol';\n    const text4 = 'Kies video van Youtube';\n    const text5 = 'Annuleer';\n\n    let btns = [\n      {\n        text: text4,\n        role: 'destructive',\n        icon: 'play',\n        handler: () => {\n          this.navCtrl.push(CreateOrUpdateStoryComponent, {\n            album: this.album,\n            method: this.constant.methods.addYoutubeStory\n          });\n        }\n      },\n      {\n        text: text5,\n        role: 'cancel',\n        icon: 'md-arrow-back',\n        handler: () => {}\n      }\n    ];\n\n    // if on mobile, allow taking a picture (cordova) or camera roll\n    if (this.plt.is('cordova')) {\n      btns = [\n        {\n          text: text2,\n          role: 'destructive',\n          icon: 'camera',\n          handler: () => {\n            this.storyService\n              .takeAPicture()\n              .let(this.takenUntilPipe)\n              .subscribe(dataUrl => {\n                this.navCtrl.push(CreateOrUpdateStoryComponent, {\n                  dataUrl: dataUrl,\n                  album: this.album,\n                  method: this.constant.methods.addNewStory\n                });\n              });\n          }\n        },\n        {\n          text: text3,\n          role: 'destructive',\n          icon: 'image',\n          handler: () => {\n            this.storyService\n              .chooseAFile()\n              .let(this.takenUntilPipe)\n              .subscribe(dataUrl => {\n                this.navCtrl.push(CreateOrUpdateStoryComponent, {\n                  dataUrl: dataUrl,\n                  album: this.album,\n                  method: this.constant.methods.addNewStory\n                });\n              });\n          }\n        },\n        ...btns\n      ];\n    } else {\n      btns = [\n        {\n          text: 'Upload een foto',\n          role: 'destructive',\n          icon: 'cloud-upload',\n          handler: () => {\n            this.navCtrl.push(CreateOrUpdateStoryComponent, {\n              album: this.album,\n              method: this.constant.methods.addFileStory\n            });\n          }\n        },\n        ...btns\n      ];\n    }\n\n    const actionSheet = this.actionsheetCtrl.create({\n      title: 'Voeg verhaal toe',\n      cssClass: 'action-sheets-basic-page',\n      buttons: btns\n    });\n    actionSheet.present();\n  }\n\n  showMore(event: Event): void {\n    const popover = this.popoverCtrl.create(\n      StoryListOptionsComponent,\n      {\n        album: this.album,\n        actionSheet: this.openActionSheet,\n        navCtrl: this.navCtrl\n      },\n      {cssClass: 'storyList-popover'}\n    );\n\n    const toast = (message: string) =>\n      this.toastCtrl\n        .create({\n          message,\n          duration: 3000,\n          position: 'bottom'\n        })\n        .present();\n\n    popover.onDidDismiss(dismissData => {\n      if (dismissData === 'deleteSuccess') {\n        toast('Het album is verwijderd.');\n        this.navCtrl.pop();\n      }\n      if (dismissData === 'deleteError') {\n        toast('Het album kon niet verwijderd worden.');\n      }\n    });\n    popover.present({\n      ev: event\n    });\n  }\n\n  showRegisterPrompt(intentionText): void {\n    const alert = this.alertCtrl.create({\n      title: 'Meld je aan',\n      subTitle: `Meld je aan om ${intentionText}. Zo kan je je bewerkingen bijhouden.`,\n      buttons: [\n        {\n          text: 'Ga terug'\n        },\n        {\n          text: 'Meld je aan',\n          handler: () => {\n            this.authService.logout();\n            this.navCtrl.setRoot(RootComponent, {isLogging: true});\n          }\n        }\n      ]\n    });\n    alert.present();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/storyList/storyList.component.ts","import {NavParams, ViewController} from 'ionic-angular';\nimport {Component} from '@angular/core';\nimport {StoryService} from '../../../../core/story.service';\nimport {PatientService} from '../../../../core/patient.service';\nimport {UserService} from '../../../../core/user.service';\nimport {AlertController} from 'ionic-angular/components/alert/alert-controller';\nimport {AuthenticationService} from '../../../../core/authentication.service';\nimport {RootComponent} from '../../../../root.component';\nimport {NavController} from 'ionic-angular/navigation/nav-controller';\n\n@Component({\n  selector: 'prisma-story-options',\n  template: `\n    <ion-list class=\"list\">\n      <ion-item (click)=\"this.userService.registrationGuard(this.confirmDeletion.bind(this),\n        this.showRegisterPrompt.bind(this, 'een verhaal te verwijderen'))\">\n        <ion-icon class=\"trash-icon\" name=\"md-trash\"></ion-icon>\n        <p class=\"contenu\">Verwijder dit verhaal</p>\n      </ion-item>\n    </ion-list>\n  `\n})\nexport class StoryOptionsComponent {\n  navCtrl: NavController = undefined;\n  constructor(\n    public viewCtrl: ViewController,\n    public storyService: StoryService,\n    public navParams: NavParams,\n    private patientService: PatientService,\n    private authService: AuthenticationService,\n    private userService: UserService,\n    private alertCtrl: AlertController\n  ) {\n    this.navCtrl = this.navParams.get('navCtrl');\n  }\n\n  deleteStory(): void {\n    this.storyService\n      .deleteStory(\n        this.patientService.getCurrentPatient().patient_id,\n        this.navParams.data.story.id\n      )\n      .subscribe(\n        () => {\n          this.viewCtrl.dismiss('deleteSuccess');\n        },\n        () => {\n          this.viewCtrl.dismiss('deleteError');\n        }\n      );\n  }\n\n  showRegisterPrompt(intentionText): void {\n    const alert = this.alertCtrl.create({\n      title: 'Meld je aan',\n      subTitle: `Meld je aan om ${intentionText}. Zo kan je je bewerkingen bijhouden.`,\n      buttons: [\n        {\n          text: 'Ga terug'\n        },\n        {\n          text: 'Meld je aan',\n          handler: () => {\n            this.authService.logout();\n            this.navCtrl.setRoot(RootComponent, {isLogging: true});\n          }\n        }\n      ]\n    });\n    alert.present();\n  }\n\n  confirmDeletion(): void {\n    this.alertCtrl.create({\n        title: 'Verhaal verwijderen',\n        subTitle:\n          `Ben je zeker dat je dit verhaal wilt verwijderen?`,\n        buttons: [{\n          text: 'Ja',\n          handler: (data) => {this.deleteStory(); }\n        }, 'Annuleer']\n      }).present();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/storyList/component/storyDetail/component/storyOptions.component.ts","import {Component, Inject, OnDestroy, OnInit, ViewChild} from '@angular/core';\nimport {NgClass} from '@angular/common';\nimport {Story, Album, Constant} from '../../shared/types';\nimport {ActionSheetController, NavController, NavParams} from 'ionic-angular';\nimport {AlbumService} from '../core/album.service';\nimport {PatientService} from '../core/patient.service';\nimport {Subject, pipe} from 'rxjs/Rx';\nimport {takeUntil} from 'rxjs/operators';\nimport {ConstantToken} from '../di';\nimport {Content} from 'ionic-angular';\nimport {StoryListOptionsComponent} from './component/storyListOptions.component';\nimport {PopoverController} from 'ionic-angular/components/popover/popover-controller';\nimport {ToastController} from 'ionic-angular/components/toast/toast-controller';\nimport {StoryService} from '../core/story.service';\nimport {CreateOrUpdateStoryComponent} from './component/createOrUpdateStory/createOrUpdateStory.component';\nimport {StoryDetailsComponent} from './component/storyDetail/storyDetail.component';\nimport {TopicPopoverComponent} from './component/topic-popover/topic-popover.component';\nimport _sortBy from 'lodash/sortBy';\nimport {Platform} from 'ionic-angular/platform/platform';\nimport {platform} from 'os';\nimport {TopicService} from '../core/topic.service';\nimport {StoryListComponent} from './storyList.component';\nimport {ViewEncapsulation} from '@angular/core';\n\n@Component({\n  selector: 'prisma-print-list',\n  template: `\n    <div class=\"print-info\">\n      <h1>Print het album {{album ? album.title : ''}}</h1>\n      <p>Druk op Ctrl+P om het printdialoog te openen.\n    </div>\n    <div class=\"print-tile\" *ngFor=\"let story of stories\">\n        <prisma-album-story\n            [getBackground]=\"getBackground\"\n            [album]=\"album\"\n            [story]=\"story\"\n            [showDetails]=\"showDetails\"\n            [emptyAlbum]=\"constant.emptyAlbum\"\n            [isAlbum]=\"false\">\n        </prisma-album-story>\n        <p class=\"print-description\" *ngIf=\"story.description\"\n          >{{story.description | slice:0:200}}{{story.description.length > 200 ? '...' : ''}}</p>\n    </div>\n    `,\n  styles: [\n    `\n      prisma-print-list > div:not(.print-info) {\n        float: left;\n        width: 50%;\n        padding: 1em 1em 0 0;\n      }\n\n      .print-info {\n        padding-top: 20%;\n        text-align: center;\n      }\n\n      @media print {\n        .print-info {\n          display: none;\n        }\n        .print-description {\n          padding: 0 1em;\n        }\n      }\n\n      @media screen {\n        .print-tile {\n          display: none;\n         }\n      }\n      `\n  ],\n  encapsulation: ViewEncapsulation.None\n})\nexport class PrintListComponent implements OnInit, OnDestroy {\n  /*\n\n    TODO: inheritance seems to be broken somehow,\n            so this is a copy-paste\n\n    */\n  album: Album;\n  stories: Story[];\n  destroy$: Subject<boolean> = new Subject<boolean>();\n  takenUntilPipe = pipe(takeUntil(this.destroy$));\n  hasTopics = true;\n\n  // @ViewChild(Content) content: Content;\n\n  constructor(\n    @Inject(ConstantToken) private constant: Constant,\n    private navParams: NavParams,\n    private albumService: AlbumService,\n    private patientService: PatientService,\n    private topicService: TopicService,\n    private navCtrl: NavController,\n    private actionsheetCtrl: ActionSheetController,\n    private popoverCtrl: PopoverController,\n    private toastCtrl: ToastController,\n    private storyService: StoryService,\n    private plt: Platform\n  ) {\n    this.getBackground = this.getBackground.bind(this);\n    this.showDetails = this.showDetails.bind(this);\n  }\n\n  ngOnInit(): void {\n    this.album = this.navParams.get('album');\n    this.openActionSheet = this.openActionSheet.bind(this);\n    this.hasTopics = this.topicService.hasQuestions(this.album.title);\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next(true);\n    this.destroy$.unsubscribe();\n  }\n\n  ionViewWillEnter(): void {\n    this.albumService\n      .getAlbum(\n        this.patientService.getCurrentPatient().patient_id,\n        this.album.id\n      )\n      .let(this.takenUntilPipe)\n      .subscribe(album => {\n        this.album = album as Album;\n        this.stories = _sortBy(this.album.stories, [\n          item => !item.favorited,\n          item => -new Date(item.updatedAt.date).getTime()\n        ]);\n      });\n    // this.content.resize();\n  }\n\n  ionViewDidEnter(): void {\n    // this.content.scrollToTop();\n  }\n\n  getBackground(story: Story) {\n    return this.storyService.getBackground(story);\n  }\n\n  showDetails(album: Album, story: Story) {\n    this.navCtrl.push(StoryDetailsComponent, {\n      album,\n      story\n    });\n  }\n\n  showPrint(): void {\n    this.navCtrl.push(PrintListComponent, {\n      album: this.album\n    });\n  }\n\n  openTopics(): void {\n    const popover = this.popoverCtrl.create(TopicPopoverComponent, {\n      topicQuery: this.album.title\n    });\n    popover.present();\n  }\n\n  openActionSheet(): void {\n    const text2 = 'Maak foto';\n    const text3 = 'Kies foto van camerarol';\n    const text4 = 'Kies video van Youtube';\n    const text5 = 'Annuleer';\n\n    let btns = [\n      {\n        text: text4,\n        role: 'destructive',\n        icon: 'play',\n        handler: () => {\n          this.navCtrl.push(CreateOrUpdateStoryComponent, {\n            album: this.album,\n            method: this.constant.methods.addYoutubeStory\n          });\n        }\n      },\n      {\n        text: text5,\n        role: 'cancel',\n        icon: 'md-arrow-back',\n        handler: () => {}\n      }\n    ];\n\n    // if on mobile, allow taking a picture (cordova) or camera roll\n    if (this.plt.is('cordova')) {\n      btns = [\n        {\n          text: text2,\n          role: 'destructive',\n          icon: 'camera',\n          handler: () => {\n            this.storyService\n              .takeAPicture()\n              .let(this.takenUntilPipe)\n              .subscribe(dataUrl => {\n                this.navCtrl.push(CreateOrUpdateStoryComponent, {\n                  dataUrl: dataUrl,\n                  album: this.album,\n                  method: this.constant.methods.addNewStory\n                });\n              });\n          }\n        },\n        {\n          text: text3,\n          role: 'destructive',\n          icon: 'image',\n          handler: () => {\n            this.storyService\n              .chooseAFile()\n              .let(this.takenUntilPipe)\n              .subscribe(dataUrl => {\n                this.navCtrl.push(CreateOrUpdateStoryComponent, {\n                  dataUrl: dataUrl,\n                  album: this.album,\n                  method: this.constant.methods.addNewStory\n                });\n              });\n          }\n        },\n        ...btns\n      ];\n    } else {\n      btns = [\n        {\n          text: 'Upload een foto',\n          role: 'destructive',\n          icon: 'cloud-upload',\n          handler: () => {\n            this.navCtrl.push(CreateOrUpdateStoryComponent, {\n              album: this.album,\n              method: this.constant.methods.addFileStory\n            });\n          }\n        },\n        ...btns\n      ];\n    }\n\n    const actionSheet = this.actionsheetCtrl.create({\n      title: 'Voeg verhaal toe',\n      cssClass: 'action-sheets-basic-page',\n      buttons: btns\n    });\n    actionSheet.present();\n  }\n\n  showMore(event: Event): void {\n    const popover = this.popoverCtrl.create(\n      StoryListOptionsComponent,\n      {\n        album: this.album,\n        actionSheet: this.openActionSheet,\n        navCtrl: this.navCtrl\n      },\n      {cssClass: 'storyList-popover'}\n    );\n\n    const toast = (message: string) =>\n      this.toastCtrl\n        .create({\n          message,\n          duration: 3000,\n          position: 'bottom'\n        })\n        .present();\n\n    popover.onDidDismiss(dismissData => {\n      if (dismissData === 'deleteSuccess') {\n        toast('Het album is verwijderd.');\n        this.navCtrl.pop();\n      }\n      if (dismissData === 'deleteError') {\n        toast('Het album kon niet verwijderd worden.');\n      }\n    });\n    popover.present({\n      ev: event\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/storyList/printList.component.ts","import {AlertController} from 'ionic-angular/components/alert/alert-controller';\nimport {Injectable} from '@angular/core';\nimport {NavController} from 'ionic-angular/navigation/nav-controller';\nimport {AuthenticationService} from '../../core/authentication.service';\nimport {RootComponent} from '../../root.component';\n\n@Injectable()\nexport class UtilService {\n  constructor() {}\n\n  getRegistrationAlert(navCtrl, alertCtrl, authService) {\n    const alert = alertCtrl.create({\n      title: 'Meld je aan',\n      subTitle:\n        'Meld je aan om deze actie uit te voeren. Zo kunnen we je bewerkingen bijhouden.',\n      buttons: [\n        {\n          text: 'Ga terug',\n          handler: () => {\n            alert.dismiss();\n          }\n        },\n        {\n          text: 'Meld je aan',\n          handler: () => {\n            authService.logout();\n            navCtrl.setRoot(RootComponent, {isLogging: true});\n          }\n        }\n      ]\n    });\n    return alert;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/provider/util.service.ts","import {Component} from '@angular/core';\nimport {NavController} from 'ionic-angular/navigation/nav-controller';\nimport {AuthenticationComponent} from '../../authentication.component';\nimport {RootComponent} from '../../../root.component';\n\n@Component({\n  selector: 'prisma-intro',\n  template: `\n    <ion-content>\n        <img class=\"intro-img\" src=\"assets/img/introPage/intro.jpg\"/>\n        <h1>Kleur jullie herinneringen</h1>\n        <button class=\"intro-btn\" ion-button large (click)=\"onRegister(true)\">Registreer</button>\n        <p class=\"alternate-option\" (click)=\"onRegister(false)\">\n         Al een account?\n        <a color=\"general\">\n          Meld je aan.\n        </a>\n      </p>\n      <p class=\"alternate-option\" (click)=\"toRoot()\">Of <a>ga terug naar de versie zonder aanmelden.</a></p>\n    </ion-content>\n\n  `\n})\nexport class IntroComponent {\n  constructor(private navCtrl: NavController) {}\n\n  onRegister(value: boolean) {\n    this.navCtrl.push(AuthenticationComponent, {\n      isLogging: value\n    });\n  }\n\n  toRoot(): void {\n    this.navCtrl.setRoot(RootComponent, {isLogging: false});\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/auth/components/intro/intro.component.ts","import {Component, OnInit} from '@angular/core';\nimport {AlertController, NavController} from 'ionic-angular';\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\nimport {PatientService} from '../../../core/patient.service';\nimport {Patient} from '../../../../shared/types';\nimport {AlbumListComponent} from '../../../albumList/albumList.component';\n\ninterface PatientResponse extends Patient {\n  id: number;\n}\n\n@Component({\n  selector: 'prisma-new-lovedone',\n  template: `\n  <ion-header>\n    <ion-navbar>\n      <ion-title>\n        <!-- Kies persoon -->\n        Account wordt aangemaakt...\n      </ion-title>\n    </ion-navbar>\n  </ion-header>\n  <ion-content no-bounce>\n    <form *ngIf=\"false\" [formGroup]=\"form\">\n      <h1 class=\"prisma-title\">Voor welke persoon verzamel<br/> je verhalen?</h1>\n      <ion-list class=\"list\">\n        <ion-item padding>\n          <ion-input\n            type=\"text\"\n            value=\"\"\n            placeholder=\"Voornaam\"\n            formControlName=\"firstName\"\n          >\n          </ion-input>\n        </ion-item>\n        <ion-item padding>\n          <ion-input\n            type=\"text\"\n            value=\"\"\n            placeholder=\"Naam\"\n            formControlName=\"lastName\"\n          >\n          </ion-input>\n        </ion-item>\n      </ion-list>\n      <button ion-button solid block full large color=\"general\" (click)=\"start(form.getRawValue())\" [disabled]=\"form.invalid\">\n        <div *ngIf=\"!loading\">Start</div>\n        <div *ngIf=\"loading\">\n          <ion-spinner item-start name=\"dots\" color=\"white\"></ion-spinner>\n        </div>\n      </button>\n    </form>\n  </ion-content>\n  `\n})\nexport class NewLovedoneComponent implements OnInit {\n  loading = false;\n  form: FormGroup;\n\n  constructor(\n    private fb: FormBuilder,\n    private lovedOnes: PatientService,\n    private navCtrl: NavController,\n    private alertCtrl: AlertController,\n    private patientService: PatientService\n  ) {}\n\n  ngOnInit(): void {\n    this.form = this.fb.group({\n      firstName: [null, [Validators.required, Validators.minLength(2)]],\n      lastName: [null, [Validators.required, Validators.minLength(2)]]\n    });\n    // Prisma TV: use a default patient\n    this.start({firstName: 'Default', lastName: 'Patient'});\n  }\n\n  start({firstName, lastName}: {firstName: string; lastName: string}) {\n    this.loading = true;\n    this.lovedOnes.addPatient(firstName.trim(), lastName.trim()).subscribe(\n      (patient: PatientResponse) => {\n        this.patientService.setPatient({\n          ...patient,\n          patient_id: patient.id\n        } as Patient);\n        this.navCtrl.setRoot(AlbumListComponent);\n      },\n      () => {\n        this.loading = false;\n        this.creationError();\n      }\n    );\n  }\n\n  private creationError(errorMessage?: string) {\n    const alert = this.alertCtrl.create({\n      title: 'Oei!',\n      subTitle:\n        errorMessage ||\n        'Er was een probleem bij het maken van je geliefde. Probeer het nog eens opnieuw.',\n      buttons: ['Ok']\n    });\n    return alert.present();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/auth/components/new-lovedone/new-lovedone.ts","import {Component, OnInit, ViewChild} from '@angular/core';\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\nimport {NavController, ToastController} from 'ionic-angular';\nimport {NavParams} from 'ionic-angular/navigation/nav-params';\nimport {AuthenticationService} from '../../../core/authentication.service';\nimport {TextInput} from 'ionic-angular/components/input/input';\n\n@Component({\n  selector: 'prisma-password-reset',\n  template: `\n    <ion-header>\n      <ion-navbar>\n        <ion-title>\n          Nieuw wachtwoord\n        </ion-title>\n      </ion-navbar>\n    </ion-header>\n    <ion-content no-bounce>\n      <p class=\"text-password-reset\">\n        Geef je email adres in, en je ontvangt een link om een nieuw wachtwoord in te stellen.\n      </p>\n      <form [formGroup]=\"form\">\n        <ion-list class=\"list\">\n          <ion-item padding>\n            <ion-input\n              type=\"email\"\n              formControlName=\"email\"\n              placeholder=\"E-mail\"\n              clearOnEdit=\"false\"\n              clearInput\n              #inputEmail>\n            </ion-input>\n          </ion-item>\n        </ion-list>\n        <button ion-button solid block full large color=\"general\"\n                (click)=\"resetPassword(form.getRawValue())\"\n                [disabled]=\"form.invalid || loading\">\n          <div *ngIf=\"!loading\">Verzenden</div>\n          <div *ngIf=\"loading\">\n            <ion-spinner item-start name=\"dots\" color=\"white\"></ion-spinner>\n          </div>\n        </button>\n      </form>\n    </ion-content>\n  `\n})\nexport class PasswordResetComponent implements OnInit {\n  form: FormGroup;\n  loading = false;\n\n  @ViewChild('inputEmail') inputEmail: TextInput;\n\n  constructor(\n    private fb: FormBuilder,\n    public toastCtrl: ToastController,\n    private navParams: NavParams,\n    private authService: AuthenticationService,\n    private navCtrl: NavController\n  ) {}\n\n  ngOnInit(): void {\n    this.form = this.fb.group({\n      email: [\n        this.navParams.get('email'),\n        [Validators.required, Validators.email],\n        []\n      ]\n    });\n\n    setTimeout(() => {\n      this.inputEmail.setFocus();\n    }, 400);\n  }\n\n  resetPassword({email}: {email: string}) {\n    this.loading = true;\n    this.authService.resetPassword(email).subscribe(data => {\n      if (data instanceof Error) {\n        this.showMessage(data.message);\n        this.loading = false;\n      } else {\n        this.showMessage(\n          'Check je email inbox om een nieuw wachtwoord in te stellen.'\n        );\n        this.navCtrl.pop();\n      }\n    });\n  }\n\n  showMessage(message: string) {\n    this.loading = false;\n    this.toastCtrl\n      .create({\n        message,\n        duration: 5000,\n        position: 'bottom'\n      })\n      .present();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/auth/components/password-reset/password-reset.component.ts","import {Component} from '@angular/core';\nimport {AlertController, NavController, NavParams} from 'ionic-angular';\nimport {AuthenticationService} from '../../../core/authentication.service';\nimport {UserService} from '../../../core/user.service';\nimport {AlbumListComponent} from '../../../albumList/albumList.component';\nimport {MixpanelService} from '../../../core/mixpanel.service';\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\nimport {OnInit} from '@angular/core/src/metadata/lifecycle_hooks';\n\n@Component({\n  selector: 'prisma-invite',\n  template: `\n    <ion-header>\n    <ion-navbar>\n      <ion-title>Nodig iemand uit</ion-title>\n    </ion-navbar>\n  </ion-header>\n\n  <ion-content padding>\n    <form [formGroup]=\"form\">\n      <ion-list inset>\n        <ion-item>\n          <ion-input\n            type=\"text\"\n            formControlName=\"firstName\"\n            placeholder=\"Voornaam\"\n            clearOnEdit=\"false\"\n            clearInput>\n          </ion-input>\n        </ion-item>\n        <ion-item>\n          <ion-input\n            type=\"text\"\n            formControlName=\"lastName\"\n            placeholder=\"Name\"\n            clearOnEdit=\"false\"\n            clearInput>\n          </ion-input>\n        </ion-item>\n        <ion-item>\n          <ion-input\n            type=\"email\"\n            formControlName=\"email\"\n            placeholder=\"E-mail\"\n            clearOnEdit=\"false\"\n            clearInput>\n          </ion-input>\n        </ion-item>\n      </ion-list>\n      <button ion-button solid block full large color=\"general\"\n              (click)=\"invite(form.getRawValue())\"\n              [disabled]=\"loading || form.invalid\">\n        <div *ngIf=\"!loading\">Uitnodigen</div>\n        <div *ngIf=\"loading\">\n          <ion-spinner item-start name=\"dots\" color=\"white\"></ion-spinner>\n        </div>\n      </button>\n    </form>\n  </ion-content>\n  `\n})\nexport class InviteComponent implements OnInit {\n  patientId: number;\n  inviterId: number;\n  form: FormGroup;\n  loading = false;\n\n  constructor(\n    public authService: AuthenticationService,\n    public navCtrl: NavController,\n    public alertCtrl: AlertController,\n    private userService: UserService,\n    public navParams: NavParams,\n    private mixpanel: MixpanelService,\n    private fb: FormBuilder\n  ) {}\n\n  ngOnInit(): void {\n    this.form = this.fb.group({\n      firstName: [null, [Validators.required], []],\n      lastName: [null, [Validators.required], []],\n      email: [null, [Validators.required, Validators.email], []]\n    });\n  }\n\n  ionViewDidLoad() {\n    this.patientId = this.navParams.get('patientId');\n    this.inviterId = this.userService.getCurrentUser().id;\n  }\n\n  invite({\n    firstName,\n    lastName,\n    email\n  }: {\n    firstName: string;\n    lastName: string;\n    email: string;\n  }) {\n    this.loading = true;\n    this.mixpanel.track('InviteComponent::invite started');\n    const data = {\n      inviterId: this.inviterId,\n      patientId: this.patientId,\n      lastName,\n      firstName,\n      email\n    };\n    this.userService.inviteUser(data).subscribe(res => {\n      if (res instanceof Error) {\n        this.mixpanel.track('InviteComponent::invite error', data);\n        this.invitePopup(firstName, res.message);\n        this.loading = false;\n      } else {\n        this.mixpanel.track('InviteComponent::invite success', data);\n        this.invitePopup(firstName);\n        this.navCtrl.setRoot(AlbumListComponent);\n      }\n    });\n  }\n\n  invitePopup(firstName: string, message?: string) {\n    const messageToSend = message\n      ? `${firstName} kon niet uitgenodigd worden.${message}`\n      : `${firstName} ontvangt een e-mail met je uitnodiging.`;\n    this.alertCtrl\n      .create({\n        title: messageToSend,\n        buttons: ['Ok']\n      })\n      .present();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/sidebar/component/invite/invite.ts","import {Component, Inject} from '@angular/core';\nimport {ConstantToken} from '../../../di';\nimport {Constant} from '../../../../shared/types';\n\n@Component({\n  selector: 'prisma-give-feedback',\n  template: `\n    <ion-header>\n      <ion-navbar>\n        <ion-title class=\"detail-title\">\n          Geef feedback\n        </ion-title>\n      </ion-navbar>\n    </ion-header>\n    <ion-content>\n        <div>\n          <p class=\"text-give-feedback\">\n            Een team van vrijwilligers met <br/>\n            een hart voor warme zorg <br/>\n            maakt de Prisma app. <br/>\n          </p>\n          <p class=\"text-give-feedback\">\n            Heb je tips? <br/>\n            Loopt er iets fout? <br/>\n            Of wil je het team helpen? <br/>\n          </p>\n          <p class=\"text-give-feedback\">\n            We horen graag van jou.\n          </p>\n        </div>\n      <hr>\n      <a href=\"mailto:{{constant.supportMailAddress}}?subject=Bericht uit Prisma applicatie\" ion-item no-lines detail-none\n        class=\"send-email\">\n        <ion-icon name=\"mail\" color=\"general\" class=\"send-mail-icon\"></ion-icon>\n        Stuur email\n      </a>\n\n    </ion-content>\n\n  `\n})\nexport class GiveFeedbackComponent {\n  constructor(@Inject(ConstantToken) private constant: Constant) {}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/sidebar/component/giveFeedback/giveFeedback.component.ts","import {platformBrowserDynamic} from '@angular/platform-browser-dynamic';\nimport {enableProdMode} from '@angular/core';\n\nimport {environment} from '../environments/environment';\nimport {AppModule} from './app.module';\n\nif (environment.currentEnv === 'production') {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import {ErrorHandler, NgModule} from '@angular/core';\nimport {BrowserModule} from '@angular/platform-browser';\nimport {IonicApp, IonicErrorHandler, IonicModule} from 'ionic-angular';\nimport {IonicStorageModule} from '@ionic/storage';\nimport {AppComponent} from './app.component';\nimport {YoutubeVideoPlayer} from '@ionic-native/youtube-video-player';\n\nimport {StatusBar} from '@ionic-native/status-bar';\nimport {SplashScreen} from '@ionic-native/splash-screen';\nimport {Camera} from '@ionic-native/camera';\nimport {File} from '@ionic-native/file';\nimport {Transfer} from '@ionic-native/transfer';\nimport {FilePath} from '@ionic-native/file-path';\nimport {Network} from '@ionic-native/network';\n\nimport {NativePageTransitions} from '@ionic-native/native-page-transitions';\n\nimport {CoreModule} from './core/core.module';\nimport {AuthModule} from './auth/auth.module';\nimport {ConstantProvider} from './di';\nimport {AlbumModule} from './albumList/album.module';\nimport {StoryModule} from './storyList/story.module';\nimport {SidebarModule} from './sidebar/sidebar.module';\nimport {RootComponent} from './root.component';\n\n@NgModule({\n  declarations: [AppComponent, RootComponent],\n  imports: [\n    BrowserModule,\n    IonicModule.forRoot(AppComponent, {statusbarPadding: false}),\n    IonicStorageModule.forRoot(),\n    CoreModule,\n    AuthModule,\n    SidebarModule,\n    AlbumModule,\n    StoryModule\n  ],\n  bootstrap: [IonicApp],\n  entryComponents: [AppComponent, RootComponent],\n  providers: [\n    ConstantProvider,\n    StatusBar,\n    SplashScreen,\n    Camera,\n    File,\n    Transfer,\n    FilePath,\n    NativePageTransitions,\n    Network,\n    YoutubeVideoPlayer,\n    {provide: ErrorHandler, useClass: IonicErrorHandler}\n  ]\n})\nexport class AppModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import {Component, ViewChild, OnInit, Inject} from '@angular/core';\nimport {Platform, Nav} from 'ionic-angular';\nimport {SplashScreen} from '@ionic-native/splash-screen';\n\nimport {MixpanelService} from './core/mixpanel.service';\nimport {AuthenticationService} from './core/authentication.service';\nimport {PatientService} from './core/patient.service';\nimport {NewLovedoneComponent} from './auth/components/new-lovedone/new-lovedone';\nimport {AlbumService} from './core/album.service';\nimport {AlbumListComponent} from './albumList/albumList.component';\nimport {Network} from '@ionic-native/network';\nimport {IntroComponent} from './auth/components/intro/intro.component';\nimport {ConstantToken} from './di';\nimport {Constant} from '../shared/types';\n\nimport {Observable} from 'rxjs/Rx';\nimport {switchMap, timeout, tap} from 'rxjs/operators';\nimport {UserService} from './core/user.service';\nimport {FullstoryService} from './core/fullstory.service';\nimport {RootComponent} from './root.component';\n\n@Component({\n  templateUrl: 'app.html'\n})\nexport class AppComponent {\n  rootParams = {isLogging: false};\n\n  rootPage = RootComponent;\n\n  constructor() {}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import {environment} from '../environments/environment';\nimport {Constant} from './types';\n\nexport const constant: Constant = {\n  apiUrl: environment.apiUrl,\n  tracking: environment.tracking,\n  trackingExcluded: environment.trackingExcluded,\n  currentEnv: environment.currentEnv,\n  currentVersion: '0.3.2',\n  youtubeApiKey: environment.youtubeApiKey,\n  jwtToken: 'id_token',\n  lastestUsedVersion: 'version',\n  defaultUsername: environment.defaultUsername,\n  defaultPassword: environment.defaultPassword,\n  localstorage: {LOCALSTORAGE_SELECTEDLANG: 'langs'},\n  privateImagesRegex: '/asset/',\n  loadingImage: 'assets/img/homePage/loading.png',\n  emptyAlbum: 'assets/img/empty-album.png',\n  supportMailAddress: 'info@prisma.care',\n  api: {\n    getSignIn: 'signin',\n    getPatient: 'patient',\n    getAlbum: 'album',\n    getStory: 'story',\n    getAsset: 'asset',\n    getUser: 'user',\n    invite: 'invite'\n  },\n  temp: {\n    albums: 'albums',\n    currentUser: 'user',\n    currentPatient: 'patient'\n  },\n  methods: {\n    addNewStory: 'addNewStory',\n    addYoutubeStory: 'addYoutubeStory',\n    replaceDescription: 'replaceDescription',\n    replaceImage: 'replaceImage',\n    addFileStory: 'addFileStory'\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/shared/constant.ts","import {Injectable, Inject} from '@angular/core';\nimport {Mixpanel, MixpanelPeople} from '@ionic-native/mixpanel';\nimport {User, Constant} from '../../shared/types';\nimport {ConstantToken} from '../di';\n\ndeclare var cordova: any;\n\n@Injectable()\nexport class MixpanelService {\n  isInit = false;\n  private token = '0c69ebeb92fc86a0b9d813b5fb6215e7';\n\n  constructor(\n    private mixpanel: Mixpanel,\n    private mixpanelPeople: MixpanelPeople,\n    @Inject(ConstantToken) private constant: Constant\n  ) {\n    this.init();\n  }\n\n  init() {\n    return this.initMixpanel().then(success => {\n      this.isInit = true;\n    });\n  }\n\n  initMixpanel(): Promise<any> {\n    return this.mixpanel.init(this.token).catch(err => {\n      console.error('Error mixpanel.init', err);\n      this.isInit = false;\n    });\n  }\n\n  track(eventName, props?: any): void {\n    if (this.constant.tracking) {\n      if (this.isInit) {\n        this.mixpanel.track(eventName, props);\n        return;\n      }\n\n      this.init().then(() => {\n        this.mixpanel.track(eventName, props);\n      });\n    } else {\n      console.warn(\n        'Mixpanel tracking disabled in environment.ts. Use \"gulp production\" to enable.'\n      );\n    }\n  }\n\n  identify(user: User): void {\n    // a function that handles the mixpanel registration\n    const mixpanelIdentify: (() => void) = () => {\n      if (\n        !this.constant.trackingExcluded.find(\n          excludedMail => excludedMail === user.email\n        )\n      ) {\n        this.mixpanel\n          .identify(String(user.id))\n          .then(() => {\n            this.mixpanelPeople\n              .set({\n                $first_name: user.firstName,\n                $last_name: user.lastName,\n                $created: null,\n                $email: user.email\n              })\n              .catch(err => {\n                console.error(\n                  'Error at binding user info to mixpanel identification.',\n                  err\n                );\n              });\n          })\n          .catch(err =>\n            console.error('Mixpanel user identification error', err)\n          );\n      } else {\n        this.mixpanel.registerSuperProperties({$ignore: true});\n        console.warn(\n          `Mixpanel logging disabled for \"${user.email}\" in environment.ts.`\n        );\n      }\n    };\n\n    if (this.isInit) {\n      mixpanelIdentify();\n    } else {\n      this.init().then(mixpanelIdentify);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/core/mixpanel.service.ts","import {Inject, Injectable} from '@angular/core';\nimport {ConstantToken} from '../di';\nimport {HttpClient} from '@angular/common/http';\nimport {HttpErrorResponse} from '@angular/common/http';\nimport {\n  background,\n  getMessageFromBackendError,\n  getUrlImage,\n  getYoutubeDescriptionAndThumbnail\n} from '../../shared/utils';\nimport {Observable, pipe} from 'rxjs/Rx';\nimport {map, catchError, tap} from 'rxjs/operators';\nimport {Story, Album, Constant} from '../../shared/types';\n\ninterface AlbumsResponse {\n  response: Album[];\n}\n\ninterface AlbumResponse {\n  response: Album;\n}\n\n@Injectable()\nexport class AlbumService {\n  albumPipe = pipe(\n    map(({response}: AlbumResponse) => response as Album),\n    // when a specific album is requested, it's assumed new\n    tap(res => this.removeHasNew(res)),\n    catchError(this.handleError)\n  );\n\n  hasNewCache: any = {};\n\n  constructor(\n    @Inject(ConstantToken) private constant: Constant,\n    private http: HttpClient\n  ) {\n    this.handleError = this.handleError.bind(this);\n  }\n\n  getAlbums(patientId: number): Observable<Album[] | Error> {\n    if (localStorage.getItem('hasNewCache')) {\n      try {\n        this.hasNewCache = JSON.parse(localStorage.getItem('hasNewCache'));\n      } catch {\n        this.hasNewCache = {};\n      }\n    }\n\n    return this.http\n      .get(\n        `${this.constant.apiUrl}/${this.constant.api.getPatient}/${patientId}/${\n          this.constant.api.getAlbum\n        }`\n      )\n      .pipe(\n        map(({response}: AlbumsResponse) =>\n          response.reduce(\n            (acc, it) => [...acc, this.getOrSetHasNewCache(it as Album)],\n            []\n          )\n        ),\n        tap(() => {\n          localStorage.setItem('hasNewCache', JSON.stringify(this.hasNewCache));\n        }),\n        catchError(this.handleError)\n      );\n  }\n\n  getOrSetHasNewCache(album: Album): Album {\n    const expirationMs: number = 24 * 3600 * 1000;\n    if (album.hasNew) {\n      this.hasNewCache[album.id] = Date.now();\n    } else {\n      // exists in cache\n      if (this.hasNewCache[album.id]) {\n        // expired - remove from cache\n        if (Date.now() - this.hasNewCache[album.id] > expirationMs) {\n          delete this.hasNewCache[album.id];\n        } else {\n          album.hasNew = true;\n        }\n      } else {\n        // not in cache -> change nothing\n      }\n    }\n    return album;\n  }\n\n  removeHasNew(album): void {\n    delete this.hasNewCache[album.id];\n    localStorage.setItem('hasNewCache', JSON.stringify(this.hasNewCache));\n  }\n\n  getAlbum(\n    patientId: string | number,\n    albumId: string | number\n  ): Observable<Album | Error> {\n    return this.http\n      .get(\n        `${this.constant.apiUrl}/${this.constant.api.getPatient}/${patientId}/${\n          this.constant.api.getAlbum\n        }/${albumId}`\n      )\n      .let(this.albumPipe);\n  }\n\n  deleteAlbum(patientId: number, albumId: number): Observable<Object | Error> {\n    return this.http\n      .delete(\n        `${this.constant.apiUrl}/${this.constant.api.getPatient}/${patientId}/${\n          this.constant.api.getAlbum\n        }/${albumId}`\n      )\n      .pipe(catchError(this.handleError));\n  }\n\n  addAlbum(patientId: number, title: string): Observable<Album | Error> {\n    return this.http\n      .post(\n        `${this.constant.apiUrl}/${this.constant.api.getPatient}/${patientId}/${\n          this.constant.api.getAlbum\n        }`,\n        {title: title}\n      )\n      .let(this.albumPipe);\n  }\n\n  getImage(filename: string): Observable<string | Error> {\n    return getUrlImage.call(this, filename);\n  }\n\n  getThumb(url: string): Observable<string> {\n    return this.checkYoutubeLink(url).pipe(\n      map((res: {thumbnail: string}) => res.thumbnail)\n    );\n  }\n\n  checkYoutubeLink(url: string): Observable<Object | Error> {\n    return getYoutubeDescriptionAndThumbnail.call(this, url);\n  }\n\n  getBackground(story: Story) {\n    return background.call(this, story);\n  }\n\n  handleError(err: HttpErrorResponse): Observable<Error> {\n    return Observable.of(\n      new Error(\n        `${getMessageFromBackendError(\n          err.error && err.error.meta && err.error.meta.message\n        )}\n      `\n      )\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/core/album.service.ts","import {Inject, Injectable} from '@angular/core';\nimport {Observable, pipe} from 'rxjs/Rx';\nimport {map, catchError} from 'rxjs/operators';\nimport {Story, Constant} from '../../shared/types';\nimport {\n  background,\n  getMessageFromBackendError,\n  getUrlImage,\n  getYoutubeDescriptionAndThumbnail,\n  youtubeId\n} from '../../shared/utils';\nimport {HttpClient, HttpErrorResponse} from '@angular/common/http';\nimport {ConstantToken} from '../di';\nimport {Camera} from '@ionic-native/camera';\nimport 'rxjs/add/operator/catch';\nimport 'rxjs/add/observable/fromPromise';\nimport {errorHandler} from '@angular/platform-browser/src/browser';\n\ninterface StoryResponse {\n  response: Story;\n}\n\ninterface StoriesResponse {\n  response: Story[];\n}\n\n@Injectable()\nexport class StoryService {\n  storyPipe = pipe(\n    map(({response}: StoryResponse) => response as Story),\n    catchError(this.handleError)\n  );\n\n  constructor(\n    @Inject(ConstantToken) private constant: Constant,\n    private http: HttpClient,\n    private camera: Camera\n  ) {\n    this.handleError = this.handleError.bind(this);\n  }\n\n  getUserStory(patientId: string, storyId: string): Observable<Story | Error> {\n    return this.http\n      .get(\n        `${this.constant.apiUrl}/${this.constant.api.getPatient}/${patientId}/${\n          this.constant.api.getStory\n        }/${storyId}`\n      )\n      .let(this.storyPipe);\n  }\n\n  getUserStories(): Observable<Story[] | Error> {\n    return this.http\n      .get('assets/json/stories.json')\n      .pipe(\n        map(({response}: StoriesResponse) =>\n          response.map(story => story as Story)\n        ),\n        catchError(this.handleError)\n      );\n  }\n\n  addStory(patientId: number, newStory: Story): Observable<Story | Error> {\n    return this.http\n      .post(\n        `${this.constant.apiUrl}/${this.constant.api.getPatient}/${patientId}/${\n          this.constant.api.getStory\n        }`,\n        newStory\n      )\n      .let(this.storyPipe);\n  }\n\n  addFile(\n    patientId: number,\n    storyId: number,\n    formData: FormData\n  ): Observable<any | Error> {\n    return this.http\n      .post(\n        `${this.constant.apiUrl}/${this.constant.api.getPatient}/${patientId}/${\n          this.constant.api.getStory\n        }/${storyId}/${this.constant.api.getAsset}`,\n        formData\n      )\n      .pipe(catchError(this.handleError));\n  }\n\n  deleteStory(patientId: number, storyId: number): Observable<Object | Error> {\n    return this.http\n      .delete(\n        `${this.constant.apiUrl}/${this.constant.api.getPatient}/${patientId}/${\n          this.constant.api.getStory\n        }/${storyId}`\n      )\n      .pipe(catchError(this.handleError));\n  }\n\n  updateStory(patientId: number, newStory: Story): Observable<Story | Error> {\n    return this.http\n      .patch(\n        `${this.constant.apiUrl}/${this.constant.api.getPatient}/${patientId}/${\n          this.constant.api.getStory\n        }/${newStory.id}`,\n        newStory\n      )\n      .let(this.storyPipe);\n  }\n\n  getImage(filename: string): Observable<string | Error> {\n    return getUrlImage.call(this, filename);\n  }\n\n  getYoutubeId(url: string): string {\n    return youtubeId(url);\n  }\n\n  getThumb(url): Observable<string> {\n    return this.checkYoutubeLink(url).map((res: {thumbnail: string}) => {\n      return res.thumbnail;\n    });\n  }\n\n  getBackground(story: Story): Observable<string | Error> {\n    return background.call(this, story);\n  }\n\n  addYoutubeLinkAsset(\n    patient_id: number,\n    storyId: number,\n    asset: string\n  ): Observable<Object | Error> {\n    return this.http\n      .post(\n        `${this.constant.apiUrl}/${\n          this.constant.api.getPatient\n        }/${patient_id}/${this.constant.api.getStory}/${storyId}/${\n          this.constant.api.getAsset\n        }`,\n        {\n          asset: asset,\n          assetType: 'youtube'\n        }\n      )\n      .pipe(catchError(this.handleError));\n  }\n\n  takeAPicture(): Observable<string> {\n    return this.getPicture(this.camera.PictureSourceType.CAMERA);\n  }\n\n  chooseAFile(): Observable<string> {\n    return this.getPicture(this.camera.PictureSourceType.PHOTOLIBRARY);\n  }\n\n  getPicture(sourceType): Observable<string> {\n    const options = {\n      quality: 90,\n      sourceType: sourceType,\n      saveToPhotoAlbum: false,\n      encodingType: this.camera.EncodingType.JPEG,\n      targetWidth: 1000,\n      targetHeight: 1000,\n      correctOrientation: true\n    };\n\n    return Observable.fromPromise(this.camera.getPicture(options));\n  }\n\n  checkYoutubeLink(url: string): Observable<Object | Error> {\n    return getYoutubeDescriptionAndThumbnail.call(this, url);\n  }\n\n  handleError(err: HttpErrorResponse): Observable<Error> {\n    return Observable.of(\n      new Error(\n        `${getMessageFromBackendError(\n          err.error && err.error.meta && err.error.meta.message\n        )}\n      `\n      )\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/core/story.service.ts","import {Observable} from 'rxjs/Rx';\nimport {Story} from '../shared/types';\nimport {map, switchMap, catchError} from 'rxjs/operators';\n\nexport interface YoutubeResponse {\n  items: {\n    0: {\n      snippet: {\n        thumbnails: {\n          default: {\n            url: string;\n          };\n          medium: {\n            url: string;\n          };\n          high: {\n            url: string;\n          };\n          standard: {\n            url: string;\n          };\n        };\n        description: string;\n        title: string;\n      };\n    };\n  };\n  pageInfo: {\n    totalResults: number;\n  };\n}\n\nexport const getMessageFromBackendError = (\n  message: string | {[key: string]: string[]} = ''\n) => {\n  if (typeof message === 'string') {\n    return message;\n  }\n\n  return Object.keys(message).reduce((acc, next) => {\n    return `${acc}\n      ${message[next].join('\\n')}\n    `;\n  }, '');\n};\n\nexport function getUrlImage(filename: string): Observable<string | Error> {\n  const header: Headers = new Headers({'Content-Type': 'image/jpg'});\n  return this.http\n    .get(`${filename}`, {\n      header,\n      responseType: 'blob'\n    })\n    .pipe(map(blob => URL.createObjectURL(blob)), catchError(this.handleError));\n}\n\nexport function background(story: Story): Observable<string | Error> {\n  return Observable.of(story).pipe(\n    map((item: Story) => {\n      if (item.type === 'image') {\n        return this.getImage(item.source);\n      } else if (item.type === 'youtube') {\n        return this.getThumb(item.source);\n      } else {\n        // probably text\n        return Observable.of(\n          new Error('story type does not have a background image')\n        );\n      }\n    }),\n    switchMap((x: Observable<string | Error>) => x)\n  );\n}\n\nexport const youtubeId = (url: string): string => {\n  const regExp = /^((?:https?:)?\\/\\/)?((?:www|m)\\.)?((?:youtube\\.com|youtu.be))(\\/(?:[\\w\\-]+\\?v=|watch\\/|v\\/)?)([\\w\\-]+)(\\S+)?$/;\n  const match = url.match(regExp);\n\n  if (match && match[5].length === 11) {\n    return match[5];\n  } else {\n    return '';\n  }\n};\n\nexport const validYoutubeLink = (url): Boolean => {\n  const youtubeLinkRegex = /^((?:https?:)?\\/\\/)?((?:www|m)\\.)?((?:youtube\\.com|youtu.be))(\\/(?:[\\w\\-]+\\?v=|watch\\/|v\\/)?)([\\w\\-]+)(\\S+)?$/;\n  return url.toLowerCase().match(youtubeLinkRegex);\n};\n\nexport function getYoutubeDescriptionAndThumbnail(\n  url: string\n): Observable<Object | null> {\n  if (validYoutubeLink(url)) {\n    const urlId = youtubeId(url);\n\n    return this.http\n      .get(\n        `https://www.googleapis.com/youtube/v3/videos?id=${urlId}&key=${\n          this.constant.youtubeApiKey\n        }&part=snippet`\n      )\n      .pipe(\n        map((res: YoutubeResponse) => ({\n          // TODO: YT description not used anymore, but might be useful at some point\n          thumbnail: res.pageInfo.totalResults\n            ? res.items[0].snippet.thumbnails\n            : null,\n          description: res.items[0].snippet.description,\n          title: res.items[0].snippet.title\n        })),\n        map((res: {thumbnail: Object; description: string; title: string}) => {\n          const last = Object.keys(res.thumbnail)[\n            Object.keys(res.thumbnail).length - 1\n          ];\n          return {...res, thumbnail: res.thumbnail[last].url};\n        }),\n        catchError(() => Observable.of(null))\n      );\n  } else {\n    return Observable.of(null);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/shared/utils.ts","import {Component, Inject} from '@angular/core';\nimport {PatientService} from '../core/patient.service';\nimport {AlertController, MenuController} from 'ionic-angular';\nimport {Album, Patient, Story, Constant} from '../../shared/types';\nimport {AlbumService} from '../core/album.service';\nimport {Observable} from 'rxjs/Rx';\nimport {MixpanelService} from '../core/mixpanel.service';\n\nimport {StoryListComponent} from '../storyList/storyList.component';\nimport {NavController} from 'ionic-angular/navigation/nav-controller';\nimport {ConstantToken} from '../di';\nimport {ToggleFullscreenDirective} from '../shared/directive/toggleFullscreen.directive';\nimport _sortBy from 'lodash/sortBy';\nimport {UtilService} from '../shared/provider/util.service';\nimport {UserService} from '../core/user.service';\nimport {AuthenticationComponent} from '../auth/authentication.component';\nimport {AuthenticationService} from '../core/authentication.service';\nimport {RootComponent} from '../root.component';\n\n@Component({\n  selector: 'prisma-album-list',\n  template: `\n    <ion-header>\n     <ion-navbar>\n        <ion-title>Waarover babbelen we?</ion-title>\n        <ion-buttons left>\n          <button ion-button menuToggle class=\"albums-menu\">\n            <ion-icon color=\"black\" name='menu'></ion-icon>\n          </button>\n        </ion-buttons>\n        <ion-buttons right>\n          <prisma-fullscreen-button></prisma-fullscreen-button>\n        </ion-buttons>\n      </ion-navbar>\n    </ion-header>\n    <ion-content>\n      <ion-grid *ngIf=\"albums\">\n        <ion-row>\n          <ion-col col-6 col-md-4 col-lg-3 *ngFor=\"let album of albums | async\">\n            <prisma-album-story\n              [getBackground]=\"getBackground\"\n              [album]=\"album\"\n              [story]=\"album.stories[album.stories.length-1]\"\n              [showDetails]=\"showDetails\"\n              [emptyAlbum]=\"constant.emptyAlbum\"\n              [isAlbum]=\"true\">\n            </prisma-album-story>\n          </ion-col>\n        </ion-row>\n      </ion-grid>\n      <div class=\"add-new-container\"\n        (click)=\"this.userService.registrationGuard(this.addAlbum.bind(this),\n          this.showRegisterPrompt.bind(this, 'een album toe te voegen'))\">\n        <div class=\"add-new\">\n          <ion-icon class=\"add-icon\" name=\"md-add\"></ion-icon>\n          <span>Voeg album toe</span>\n        </div>\n      </div>\n    </ion-content>\n  `\n})\nexport class AlbumListComponent {\n  albums: Observable<Album[]>;\n  currentPatient: Patient;\n\n  constructor(\n    @Inject(ConstantToken) private constant: Constant,\n    private patientService: PatientService,\n    private authService: AuthenticationService,\n    private menu: MenuController,\n    private albumService: AlbumService,\n    private mixpanel: MixpanelService,\n    private navCtrl: NavController,\n    private utilService: UtilService,\n    private userService: UserService,\n    private alertCtrl: AlertController\n  ) {\n    this.getBackground = this.getBackground.bind(this);\n    this.showDetails = this.showDetails.bind(this);\n  }\n\n  ionViewWillEnter(): void {\n    this.menu.enable(true);\n    this.patientService.patientExists().subscribe(bool => {\n      if (bool && this.patientService.patientExistsSync()) {\n        this.currentPatient = this.patientService.getCurrentPatient();\n        this.albums = this.sortAlbumArrayByOwnerAndTitle(\n          this.albumService.getAlbums(this.currentPatient.patient_id)\n        );\n      }\n    });\n  }\n\n  sortAlbumArrayByOwnerAndTitle(\n    albums: Observable<Album[] | Error>\n  ): Observable<Album[]> {\n    return albums.map((albumArray: Album[]) => {\n      return _sortBy<Album>(albumArray, [\n        item => item.patientId,\n        item => item.title.toLowerCase()\n      ]);\n    });\n  }\n\n  ionViewWillLeave(): void {\n    this.menu.enable(false);\n  }\n\n  showDetails(album: Album) {\n    this.navCtrl.push(StoryListComponent, {\n      album\n    });\n  }\n\n  getBackground(story: Story) {\n    return this.albumService.getBackground(story);\n  }\n\n  addAlbum(): void {\n    const albumFailedAlert = this.alertCtrl.create({\n      title: 'Fout bij het maken van het album',\n      subTitle:\n        'Onze excuses, het album kon niet aangemaakt worden. Er is iets fout met Prisma.\\nProbeer later nog eens opnieuw!',\n      buttons: ['Ok']\n    });\n\n    const text1 = 'Voeg album toe';\n    const text2 = 'Annuleer';\n    const text3 = 'Voeg toe';\n\n    this.alertCtrl\n      .create({\n        title: text1,\n        message: 'Hoe wil je het album noemen?',\n        inputs: [\n          {\n            name: 'title',\n            placeholder: 'bv. Kajakclub'\n          }\n        ],\n        buttons: [\n          {\n            text: text2\n          },\n          {\n            text: text3,\n            handler: data => {\n              this.albumService\n                .addAlbum(this.currentPatient.patient_id, data.title)\n                .subscribe(\n                  () => {\n                    this.mixpanel.track('AlbumsComponent::add album success', {\n                      patient_id: this.currentPatient.patient_id,\n                      title: data.title\n                    });\n\n                    this.albums = this.sortAlbumArrayByOwnerAndTitle(\n                      this.albumService.getAlbums(\n                        this.currentPatient.patient_id\n                      )\n                    );\n                  },\n                  () => {\n                    this.mixpanel.track('AlbumsComponent::add album error', {\n                      patient_id: this.currentPatient.patient_id,\n                      title: data.title\n                    });\n\n                    albumFailedAlert.present();\n                  }\n                );\n            }\n          }\n        ]\n      })\n      .present();\n  }\n\n  showRegisterPrompt(intentionText): void {\n    const alert = this.alertCtrl.create({\n      title: 'Meld je aan',\n      subTitle: `Meld je aan om ${intentionText}. Zo kan je je bewerkingen bijhouden.`,\n      buttons: [\n        {\n          text: 'Ga terug'\n        },\n        {\n          text: 'Meld je aan',\n          handler: () => {\n            this.authService.logout();\n            this.navCtrl.setRoot(RootComponent, {isLogging: true});\n          }\n        }\n      ]\n    });\n    alert.present();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/albumList/albumList.component.ts","export const QUESTIONS = [\n  // PERSONAL\n  {\n    questions: ['Oude familieleden', 'Land van herkomst', 'Overgrootouders'],\n    keywords: ['grootouders']\n  },\n  {\n    questions: [\n      'Huis',\n      'Huisdieren',\n      'Gewoontes of tradities',\n      'Favoriet eten als kind',\n      'Kinderkleding',\n      'Opvoeding',\n      'Broers en zussen',\n      'Slaaprituelen',\n      'Communiefeest',\n      'Braaf of rebels',\n      'Vrienden aan huis',\n      'Grootouders',\n      'Verhuizen'\n    ],\n    keywords: ['kindertijd', 'kind', 'jeugd', 'gezin']\n  },\n  {\n    questions: [\n      'Beroep',\n      'Eerste werk',\n      'Vakantiejobs',\n      `Leuke collega's`,\n      'Bazen'\n    ],\n    keywords: ['werk', 'bureau']\n  },\n  {\n    questions: [\n      'Basisschool',\n      'Leerkrachten',\n      'Favoriete schoolvak',\n      'Op straf',\n      'Reglementen'\n    ],\n    keywords: ['school', 'leerkracht', 'klas', 'kindertijd']\n  },\n  {\n    questions: [\n      'Eerste verliefdheid',\n      'Afspraakjes',\n      'Voorstellen aan familie',\n      'Trouwdag',\n      'Chaperone',\n      'Liefdesbrieven',\n      'Geschenkjes'\n    ],\n    keywords: ['trouw', 'liefde']\n  },\n  {\n    questions: [\n      'Eerste kind',\n      'Namen van kinderen',\n      'Trouwfeesten',\n      'Geboortes',\n      'Familiefeesten',\n      'Broers en zussen',\n      'Familie in het buitenland'\n    ],\n    keywords: ['familie', 'gezin']\n  },\n  {\n    questions: [\n      'Vrijdetijdsbezigheden',\n      'Uitgaan',\n      `Lievelingsprogramma's`,\n      'Concerten',\n      'Zelf een instrument bespelen'\n    ],\n    keywords: ['vrije tijd', 'hobby', 'hobbies']\n  },\n  {\n    questions: [\n      'Beste vriend(in)',\n      'Activiteiten samen',\n      'Nieuwe vrienden leren kennen',\n      'Vrienden in kindertijd'\n    ],\n    keywords: ['vrienden', 'vriendschap', 'vriend', 'kennis', 'kennissen']\n  },\n  {\n    questions: [\n      'Eerste vakantie',\n      'Verre landen',\n      'Alleen op vakantie',\n      'Vervoersmiddelen',\n      'Mooie steden',\n      'De zee',\n      'Vakantiekolonies',\n      'Buitenlands eten'\n    ],\n    keywords: ['vakantie', 'reizen', 'reis', 'avontuur']\n  },\n  // MORE GENERAL\n  {\n    questions: [\n      'Favoriete voetballer',\n      'Zelf sporten',\n      'Favoriete sport',\n      'Wedstrijd gewonnen'\n    ],\n    keywords: ['sport']\n  },\n  {\n    questions: [\n      'Lievelingsgerecht',\n      'Exotisch eten',\n      'Italiaanse gerechten',\n      'Vlaamse kost',\n      'Favoriet snoepgoed'\n    ],\n    keywords: ['voeding', 'eten']\n  },\n  {\n    questions: [\n      'Buurtcafés',\n      'Buurtfeesten',\n      'Feesten in gemeente',\n      'Evenementen in de gemeente'\n    ],\n    keywords: ['gemeente']\n  },\n  {\n    questions: [\n      'Boodschappen doen',\n      'Verwarming',\n      'Wassen',\n      'Vervoer',\n      'Koken'\n    ],\n    keywords: ['dagelijks leven']\n  },\n  {\n    questions: [\n      `Spelprogramma's`,\n      'Luisterspelen',\n      'Journaal',\n      `Kinderprogramma's`\n    ],\n    keywords: ['vermaak']\n  },\n  {\n    questions: [\n      'Familiefeesten',\n      'Communiefeest',\n      'Kerstcadeaus',\n      'Verjaardagstaart',\n      'Naar de misdienst'\n    ],\n    keywords: ['feesten', 'tradities']\n  }\n];\n\n\n\n// WEBPACK FOOTER //\n// ./src/shared/question.ts","import {NgModule} from '@angular/core';\nimport {HttpModule} from '@angular/http';\nimport {HTTP_INTERCEPTORS, HttpClientModule} from '@angular/common/http';\nimport {AuthenticationInterceptor} from './interceptors/authentication.interceptor';\nimport {CommonHeadersInterceptor} from './interceptors/common-headers.interceptor';\nimport {UnauthorizedErrorInterceptor} from './interceptors/unauthorized-error.interceptor';\nimport {AuthenticationService} from './authentication.service';\nimport {IonicModule} from 'ionic-angular';\nimport {PatientService} from './patient.service';\nimport {UserService} from './user.service';\nimport {AlbumService} from './album.service';\nimport {StoryService} from './story.service';\nimport {TopicService} from './topic.service';\nimport {InvalidTokenInterceptor} from './interceptors/invalid-token.interceptor';\nimport {NetworkInterceptor} from './interceptors/network.interceptor';\nimport {MixpanelService} from './mixpanel.service';\nimport {FullstoryService} from './fullstory.service';\nimport {Mixpanel, MixpanelPeople} from '@ionic-native/mixpanel';\n\nconst imports = [HttpClientModule, HttpModule, IonicModule];\n\n@NgModule({\n  declarations: [],\n  imports,\n  providers: [\n    {\n      provide: HTTP_INTERCEPTORS,\n      useClass: CommonHeadersInterceptor,\n      multi: true\n    },\n    {\n      provide: HTTP_INTERCEPTORS,\n      useClass: AuthenticationInterceptor,\n      multi: true\n    },\n    {\n      provide: HTTP_INTERCEPTORS,\n      useClass: InvalidTokenInterceptor,\n      multi: true\n    },\n    {\n      provide: HTTP_INTERCEPTORS,\n      useClass: UnauthorizedErrorInterceptor,\n      multi: true\n    },\n    {\n      provide: HTTP_INTERCEPTORS,\n      useClass: NetworkInterceptor,\n      multi: true\n    },\n    AuthenticationService,\n    PatientService,\n    UserService,\n    AlbumService,\n    StoryService,\n    TopicService,\n    MixpanelService,\n    FullstoryService,\n    Mixpanel,\n    MixpanelPeople\n  ],\n  exports: [...imports]\n})\nexport class CoreModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/core/core.module.ts","import {\n  HttpEvent,\n  HttpHandler,\n  HttpInterceptor,\n  HttpRequest\n} from '@angular/common/http';\nimport {Inject, Injectable} from '@angular/core';\nimport {Observable} from 'rxjs/Observable';\nimport {ConstantToken} from '../../di';\nimport {Constant} from '../../../shared/types';\n\n@Injectable()\nexport class AuthenticationInterceptor implements HttpInterceptor {\n  constructor(@Inject(ConstantToken) private constant: Constant) {}\n\n  intercept(\n    req: HttpRequest<any>,\n    next: HttpHandler\n  ): Observable<HttpEvent<any>> {\n    if (req.url.includes(this.constant.apiUrl)) {\n      return next.handle(this.setAuthorizationHeader(req));\n    }\n    return next.handle(req);\n  }\n\n  setAuthorizationHeader(req: HttpRequest<any>): HttpRequest<any> {\n    return req.clone({\n      setHeaders: {\n        Authorization: `Bearer ${localStorage.getItem(this.constant.jwtToken)}`\n      }\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/core/interceptors/authentication.interceptor.ts","import {\n  HttpEvent,\n  HttpHandler,\n  HttpInterceptor,\n  HttpRequest\n} from '@angular/common/http';\nimport {Inject, Injectable} from '@angular/core';\nimport {Observable} from 'rxjs/Observable';\nimport {ConstantToken} from '../../di';\nimport {Constant} from '../../../shared/types';\n\n@Injectable()\nexport class CommonHeadersInterceptor implements HttpInterceptor {\n  constructor(@Inject(ConstantToken) private constant: Constant) {}\n\n  intercept(\n    req: HttpRequest<any>,\n    next: HttpHandler\n  ): Observable<HttpEvent<any>> {\n    if (req.url.includes(this.constant.apiUrl)) {\n      return next.handle(this.setHeaders(req));\n    }\n    return next.handle(req);\n  }\n\n  setHeaders(req: HttpRequest<any>): HttpRequest<any> {\n    return req.clone({\n      setHeaders: {\n        Accept: 'application/json',\n        'Access-Control-Allow-Origin': this.constant.apiUrl,\n        // Request methods you wish to allow\n        'Access-Control-Allow-Methods': 'GET, POST, PUT, PATCH, DELETE',\n        // Set to true if you need the website to include cookies in  requests\n        'Access-Control-Allow-Credentials': 'true',\n        'Access-Control-Allow-Headers':\n          'Content-Type, Authorization, Content-Length, X-Requested-With'\n      }\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/core/interceptors/common-headers.interceptor.ts","import {\n  HttpErrorResponse,\n  HttpEvent,\n  HttpHandler,\n  HttpInterceptor,\n  HttpRequest\n} from '@angular/common/http';\nimport {Injectable, Inject} from '@angular/core';\nimport {Observable} from 'rxjs/Observable';\nimport {App} from 'ionic-angular';\nimport {AuthenticationComponent} from '../../auth/authentication.component';\nimport {ConstantToken} from '../../di';\nimport {catchError} from 'rxjs/operators/catchError';\nimport {Constant} from '../../../shared/types';\n\n@Injectable()\nexport class UnauthorizedErrorInterceptor implements HttpInterceptor {\n  private AUTHENTICATION_PAGE_NAME = 'AuthenticationComponent';\n\n  constructor(\n    public app: App,\n    @Inject(ConstantToken) private constant: Constant\n  ) {}\n\n  intercept(\n    req: HttpRequest<any>,\n    next: HttpHandler\n  ): Observable<HttpEvent<any>> {\n    return next.handle(req).pipe(\n      catchError((httpError: HttpErrorResponse) => {\n        // Check if we had 401 response\n        if (\n          httpError.status === 401 &&\n          req.url.includes(this.constant.apiUrl)\n        ) {\n          this.clearTokens();\n          const nav = this.app.getActiveNav();\n          const activeNavName = nav.getActive().name;\n          return activeNavName === this.AUTHENTICATION_PAGE_NAME\n            ? Observable.throw(httpError)\n            : Observable.from(nav.setRoot(AuthenticationComponent)).switchMapTo(\n                Observable.empty()\n              );\n        }\n        return Observable.throw(httpError);\n      })\n    );\n  }\n\n  private clearTokens() {\n    localStorage.clear();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/core/interceptors/unauthorized-error.interceptor.ts","import {\n  HttpErrorResponse,\n  HttpEvent,\n  HttpHandler,\n  HttpInterceptor,\n  HttpRequest\n} from '@angular/common/http';\nimport {Injectable} from '@angular/core';\nimport {Observable} from 'rxjs/Observable';\nimport {App} from 'ionic-angular';\nimport {AuthenticationComponent} from '../../auth/authentication.component';\nimport {catchError} from 'rxjs/operators/catchError';\n\n@Injectable()\nexport class InvalidTokenInterceptor implements HttpInterceptor {\n  constructor(public app: App) {}\n\n  intercept(\n    req: HttpRequest<any>,\n    next: HttpHandler\n  ): Observable<HttpEvent<any>> {\n    return next.handle(req).pipe(\n      catchError((httpError: HttpErrorResponse) => {\n        // Check if we had 400 response and if the error is about the token\n        if (\n          httpError.status === 400 &&\n          typeof httpError.error.meta.message === 'string' &&\n          httpError.error.meta.message.includes('token is invalid')\n        ) {\n          this.clearTokens();\n          const nav = this.app.getActiveNav();\n          return nav.setRoot(AuthenticationComponent, {\n            error: httpError.error.meta.message\n          });\n        }\n        return Observable.throw(httpError);\n      })\n    );\n  }\n\n  private clearTokens() {\n    localStorage.clear();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/core/interceptors/invalid-token.interceptor.ts","import {\n  HttpEvent,\n  HttpHandler,\n  HttpInterceptor,\n  HttpRequest\n} from '@angular/common/http';\nimport {Injectable} from '@angular/core';\nimport {Observable} from 'rxjs/Observable';\nimport {Network} from '@ionic-native/network';\n\n@Injectable()\nexport class NetworkInterceptor implements HttpInterceptor {\n  constructor(private network: Network) {}\n\n  intercept(\n    req: HttpRequest<any>,\n    next: HttpHandler\n  ): Observable<HttpEvent<any>> {\n    if (this.network.type === 'none') {\n      return next\n        .handle(req)\n        .retryWhen(error => error.switchMap(() => Observable.timer(1000)));\n    }\n    return next.handle(req);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/core/interceptors/network.interceptor.ts","import {NgModule} from '@angular/core';\nimport {AuthenticationHeaderComponent} from './components/authentication-header.component';\nimport {AuthenticationRegisterComponent} from './components/authentication-register.component';\nimport {AuthenticationLoginComponent} from './components/authentication-login.component';\nimport {SharedModule} from '../shared/shared.module';\nimport {AuthenticationComponent} from './authentication.component';\nimport {NewLovedoneComponent} from './components/new-lovedone/new-lovedone';\nimport {PasswordResetComponent} from './components/password-reset/password-reset.component';\nimport {IntroComponent} from './components/intro/intro.component';\n\nconst imports = [SharedModule];\nconst declarations = [\n  AuthenticationHeaderComponent,\n  AuthenticationRegisterComponent,\n  AuthenticationLoginComponent,\n  AuthenticationComponent,\n  NewLovedoneComponent,\n  PasswordResetComponent,\n  IntroComponent\n];\n\n@NgModule({\n  declarations,\n  imports,\n  providers: [],\n  entryComponents: [\n    IntroComponent,\n    AuthenticationComponent,\n    NewLovedoneComponent,\n    PasswordResetComponent\n  ],\n  exports: [...imports, ...declarations]\n})\nexport class AuthModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/auth/auth.module.ts","import {Component, Input} from '@angular/core';\n\n@Component({\n  selector: 'prisma-authentication-header',\n  template: `\n  <ion-navbar>\n    <ion-title>\n      {{title}}\n    </ion-title>\n  </ion-navbar>\n  `\n})\nexport class AuthenticationHeaderComponent {\n  @Input() title: string;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/auth/components/authentication-header.component.ts","import {Component, Input, OnInit, ViewChild} from '@angular/core';\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\nimport {AuthenticationService} from '../../core/authentication.service';\nimport {AlertController, TextInput} from 'ionic-angular';\nimport {MixpanelService} from '../../core/mixpanel.service';\nimport {User, UserRegister} from '../../../shared/types';\nimport {Observable} from 'rxjs/Rx';\nimport {switchMap, tap} from 'rxjs/operators';\n\ntype authFunction = () => void;\n\n@Component({\n  selector: 'prisma-authentication-register',\n  template: `\n    <form [formGroup]=\"form\" (ngSubmit)=\"register(form.getRawValue())\">\n      <ion-list class=\"list\">\n        <ion-item padding>\n          <ion-input #inputFirstname type=\"text\" value=\"\" formControlName=\"firstName\" placeholder=\"Voornaam\"\n          ></ion-input>\n        </ion-item>\n        <ion-item padding>\n          <ion-input type=\"text\" value=\"\" formControlName=\"lastName\" placeholder=\"Naam\"\n          ></ion-input>\n        </ion-item>\n        <ion-item padding>\n          <ion-input type=\"email\" value=\"\" formControlName=\"email\" placeholder=\"E-mail\"\n          ></ion-input>\n        </ion-item>\n        <ion-item padding>\n          <ion-input\n            [type]=\"type\" #input\n            formControlName=\"password\"\n            placeholder=\"Wachtwoord\"\n            clearOnEdit=\"false\" clearInput></ion-input>\n          <button ion-button icon-only (click)=\"toggleShow()\" type=\"button\" clear item-right>\n            <ion-icon *ngIf=\"!show\" name=\"eye\" color=\"medium-gray\"></ion-icon>\n            <ion-icon *ngIf=\"show\" name=\"eye-off\" color=\"medium-gray\"></ion-icon>\n          </button>\n        </ion-item>\n      </ion-list>\n\n      <button type=\"submit\" ion-button solid block full large color=\"primary\"\n              [disabled]=\"form.invalid\">\n        <div *ngIf=\"!loading\">Maak account</div>\n        <div *ngIf=\"loading\">\n          <ion-spinner item-start name=\"dots\" color=\"white\"></ion-spinner>\n        </div>\n      </button>\n\n      <div class=\"signup-suggestion\">\n        <p class=\"alternate-option\">Al een account? <a color=\"general\" (click)=\"onLoginClick()\">Aanmelden.</a></p>\n      </div>\n    </form>\n  `\n})\nexport class AuthenticationRegisterComponent implements OnInit {\n  form: FormGroup;\n  type = 'password';\n  show = false;\n  loading = false;\n\n  @ViewChild('inputFirstname') inputFirstname: TextInput;\n  @Input() onLoginClick: authFunction;\n  @Input() onComplete: authFunction;\n\n  constructor(\n    private fb: FormBuilder,\n    private auth: AuthenticationService,\n    private alertCtrl: AlertController,\n    private mixpanel: MixpanelService\n  ) {}\n\n  // TODO: display error message\n\n  ngOnInit(): void {\n    this.form = this.fb.group({\n      email: [null, [Validators.required, Validators.email], []],\n      password: [\n        null,\n        [\n          Validators.required,\n          Validators.minLength(6),\n          Validators.maxLength(40)\n        ],\n        []\n      ],\n      firstName: [null, [Validators.required], []],\n      lastName: [null, [Validators.required], []]\n    });\n\n    setTimeout(() => {\n      this.inputFirstname.setFocus();\n    }, 400);\n  }\n\n  toggleShow() {\n    this.show = !this.show;\n    this.type = this.show ? 'text' : 'password';\n  }\n\n  register(user: UserRegister) {\n    this.loading = true;\n\n    this.auth\n      .signUp(user)\n      .pipe(\n        switchMap((res: boolean | Error) => {\n          if (res instanceof Error) {\n            this.mixpanel.track('LoginComponent::Register error', {\n              email: user.email,\n              firstName: user.firstName,\n              lastName: user.lastName\n            });\n            this.showError(res.message);\n            return Observable.empty();\n          }\n          return Observable.of(res);\n        }),\n        tap(() => {\n          this.mixpanel.track('LoginComponent::Register success', {\n            email: user.email,\n            firstName: user.firstName,\n            lastName: user.lastName\n          });\n          this.loading = false;\n          this.onComplete();\n        })\n      )\n      .subscribe(undefined, err => {\n        this.mixpanel.track('LoginComponent::Register error', {\n          email: user.email,\n          firstName: user.firstName,\n          lastName: user.lastName\n        });\n        this.showError(err.message);\n      });\n  }\n\n  showError(\n    errorMessage: string = 'Onmogelijk om u te registreren, neem dan contact op met de beheerder'\n  ) {\n    this.loading = false;\n    const alert = this.alertCtrl.create({\n      title: errorMessage,\n      buttons: ['Ok']\n    });\n\n    alert.present();\n\n    this.auth.logout();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/auth/components/authentication-register.component.ts","import {Component, Input, OnInit, ViewChild} from '@angular/core';\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\nimport {AuthenticationService} from '../../core/authentication.service';\nimport {AlertController, NavController} from 'ionic-angular';\nimport {Network} from '@ionic-native/network';\nimport {MixpanelService} from '../../core/mixpanel.service';\nimport {FullstoryService} from '../../core/fullstory.service';\nimport {Observable} from 'rxjs/Rx';\nimport {switchMap, timeout, tap} from 'rxjs/operators';\nimport {UserService} from '../../core/user.service';\nimport {PasswordResetComponent} from './password-reset/password-reset.component';\nimport {TextInput} from 'ionic-angular/components/input/input';\nimport {RootComponent} from '../../root.component';\n\ntype authFunction = () => void;\n\n@Component({\n  selector: 'prisma-authentication-login',\n  template: `\n    <form [formGroup]=\"form\" (ngSubmit)=\"login(form.getRawValue())\">\n      <ion-list class=\"list\">\n        <ion-item padding>\n          <ion-input\n            type=\"email\"\n            formControlName=\"email\"\n            placeholder=\"E-mail\"\n            clearOnEdit=\"false\"\n            clearInput\n            #inputEmail>\n          </ion-input>\n        </ion-item>\n\n        <ion-item padding>\n          <ion-input\n            [type]=\"type\"\n            #input\n            formControlName=\"password\"\n            placeholder=\"Wachtwoord\"\n            clearOnEdit=\"false\"\n            clearInput>\n          </ion-input>\n\n          <button\n            ion-button icon-only clear item-right\n            (click)=\"toggleShow()\" type=\"button\">\n            <ion-icon *ngIf=\"!show\" name=\"eye\" color=\"medium-gray\"></ion-icon>\n            <ion-icon *ngIf=\"show\" name=\"eye-off\" color=\"medium-gray\"></ion-icon>\n          </button>\n        </ion-item>\n      </ion-list>\n\n      <button type=\"submit\" ion-button solid block full large color=\"general\"\n              [disabled]=\"form.invalid\">\n        <div *ngIf=\"!loading\">Aanmelden</div>\n        <div *ngIf=\"loading\">\n          <ion-spinner item-start name=\"dots\" color=\"white\"></ion-spinner>\n        </div>\n      </button>\n\n      <div class=\"signup-suggestion\">\n        <p class=\"alternate-option\" (click)=\"onRegisterClick()\">\n          Nog geen account?\n          <a color=\"general\">\n            Maak account.\n          </a>\n        </p>\n        <p class=\"alternate-option\" (click)=\"goToPasswordResetPage()\">\n          <a color=\"general\">\n            Wachtwoord vergeten?\n          </a>\n        </p>\n      </div>\n    </form>\n  `\n})\nexport class AuthenticationLoginComponent implements OnInit {\n  form: FormGroup;\n  type = 'password';\n  show = false;\n  loading = false;\n\n  @ViewChild('inputEmail') inputEmail: TextInput;\n  @Input() data: {email: string} = {email: ''};\n  @Input() onRegisterClick: authFunction;\n  @Input() onComplete: authFunction;\n\n  constructor(\n    private fb: FormBuilder,\n    private auth: AuthenticationService,\n    private alertCtrl: AlertController,\n    private network: Network,\n    private mixpanel: MixpanelService,\n    private fullstory: FullstoryService,\n    private userService: UserService,\n    private navCtrl: NavController\n  ) {}\n\n  // TODO: display error message\n\n  ngOnInit(): void {\n    this.form = this.fb.group({\n      email: [this.data.email, [Validators.required, Validators.email], []],\n      password: [\n        null,\n        [\n          Validators.required,\n          Validators.minLength(6),\n          Validators.maxLength(40)\n        ],\n        []\n      ]\n    });\n\n    setTimeout(() => {\n      this.inputEmail.setFocus();\n    }, 400);\n  }\n\n  toggleShow() {\n    this.show = !this.show;\n    this.type = this.show ? 'text' : 'password';\n  }\n\n  login({email, password}: {email: string; password: string}) {\n    if (this.network.type === 'none') {\n      return this.showError('Je bent niet verbonden met het internet.');\n    }\n\n    this.loading = true;\n    const obs = this.auth.login(email, password).pipe(\n      switchMap((res: boolean | Error) => {\n        if (res instanceof Error) {\n          this.mixpanel.track('LoginComponent::Login error', email);\n          this.showError(res.message);\n          return Observable.empty();\n        }\n        return Observable.of(res);\n      }),\n      /* timeout(10000),\n        TODO this gave problems in re-login.\n        Login succeeds, but the timeout still happens. This triggers showError, which does a logout...\n        maybe the switchmap must complete ?\n\n        */\n      tap(() => {\n        this.loading = false;\n        this.mixpanel.identify(this.userService.getCurrentUser());\n        this.fullstory.identify(this.userService.getCurrentUser());\n        this.mixpanel.track(\n          'LoginComponent::Login success',\n          this.userService.getCurrentUser().email\n        );\n        this.onComplete();\n      })\n    );\n\n    obs.subscribe(undefined, err => {\n      this.mixpanel.track('LoginComponent::Login error', email);\n      this.showError(err.message);\n    });\n  }\n\n  goToPasswordResetPage(): void {\n    this.navCtrl.push(PasswordResetComponent, {\n      email: this.form.getRawValue().email\n    });\n  }\n\n  showError(\n    errorMessage: string = 'Je gebruikersnaam of wachtwoord klopt niet.'\n  ) {\n    this.loading = false;\n    const alert = this.alertCtrl.create({\n      title: errorMessage,\n      buttons: ['Ok']\n    });\n\n    alert.present();\n\n    this.auth.logout();\n    this.navCtrl.setRoot(RootComponent, {isLogging: true});\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/auth/components/authentication-login.component.ts","import {Component, Input, OnDestroy, OnInit} from '@angular/core';\nimport {DomSanitizer, SafeStyle} from '@angular/platform-browser';\nimport {Subject, Observable} from 'rxjs/Rx';\nimport {takeUntil} from 'rxjs/operators';\nimport {Story, Album} from '../../../shared/types';\n\nimport {environment} from '../../../environments/environment';\n\ntype showDetails = (album: Album, story: Story) => void;\ntype getBackground = (story: Story) => Observable<string | Error>;\n\n@Component({\n  selector: 'prisma-album-story',\n  template: `\n    <div *ngIf=\"imageLoaded\"\n      class=\"album-thumb test\"\n      (click)=\"showDetails(album, story)\">\n      <img class=\"album-img\" [src]=\"backgroundImage\">\n      <div *ngIf=\"isAlbum\">\n          <div class=\"tile-overlay-gradient\"></div>\n          <div *ngIf=\"album.hasNew\" class=\"has-new-item\">NIEUW</div>\n          <h3 class=\"hist-title\">{{album.title || '?'}}</h3>\n      </div>\n      <div *ngIf=\"!isAlbum && story.source\">\n          <div class=\"boxPlay\">\n            <div *ngIf=\"typeYoutube(story)\" class=\"youtube-icon circle-icon movie-indicator\"></div>\n          </div>\n          <ion-icon *ngIf=\"story.favorited\" class=\"star tile-star\" name=\"star\"\n            [class.favorited]=\"isFavorited\"></ion-icon>\n          <h3 *ngIf=\"typeYoutube(story)\">{{story.description}}</h3>\n      </div>\n      <!-- If no story source -->\n      <div *ngIf=\"!isAlbum && !story.source\">\n          <div class=\"tile-overlay-gradient\"></div>\n          <div *ngIf=\"album.hasNew\" class=\"has-new-item\">NIEUW</div>\n          <div class=\"text-story-container\">\n            <span class=\"text-story\">{{story.description || ''}}</span>\n          </div>\n      </div>\n    </div>\n    <div *ngIf=\"!imageLoaded\" class=\"album-thumb\">\n      <ion-spinner item-start name=\"dots\" color=\"white\"></ion-spinner>\n    </div>\n  `\n})\nexport class AlbumOrStoryComponent implements OnInit, OnDestroy {\n  destroy$: Subject<boolean> = new Subject<boolean>();\n  backgroundImage: SafeStyle;\n  backgroundColor: string;\n  imageLoaded = false;\n\n  @Input() album: Album;\n  @Input() story: Story;\n  @Input() getBackground: getBackground;\n  @Input() showDetails: showDetails;\n  @Input() emptyAlbum: string;\n  @Input() isAlbum: boolean;\n\n  constructor(private sanitizer: DomSanitizer) {}\n\n  ngOnInit(): void {\n    this.setBackgroundImage(this.story);\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next(true);\n    this.destroy$.unsubscribe();\n  }\n\n  setBackgroundImage(story: Story) {\n    if (environment.currentEnv === 'test') {\n      this.backgroundImage = '/assets/img/laadtijd.jpg';\n      this.imageLoaded = true;\n      return;\n    }\n    if (story) {\n      this.getBackground(story)\n        .pipe(takeUntil(this.destroy$))\n        .subscribe((imageUrl: string) => {\n          this.story = {\n            ...this.story,\n            backgroundImage: imageUrl\n          };\n          this.backgroundImage = this.sanitizer.bypassSecurityTrustUrl(\n            imageUrl\n          );\n          this.imageLoaded = true;\n        });\n    } else {\n      this.backgroundImage = this.emptyAlbum;\n      this.imageLoaded = true;\n    }\n  }\n\n  typeYoutube(story: Story): boolean {\n    return story.type === 'youtube';\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/component/albumOrStory.component.ts","export class User {\n  id: number;\n  firstName: string;\n  lastName: string;\n  email: string;\n}\n\nexport class UserRegister extends User {\n  password: string;\n}\n\nexport class Patient {\n  patient_id: number;\n  firstName: string;\n  lastName: string;\n}\n\nexport class Story {\n  id: number;\n  userId: number;\n  description: string;\n  title: string;\n  favorited: boolean;\n  isHeritage: boolean;\n  source: string;\n  backgroundImage: string;\n  type: string;\n  createdAt: {date: string};\n  updatedAt: {date: string};\n}\n\nexport class Album {\n  id: string;\n  patientId: number;\n  title: string;\n  description: string;\n  stories: Story[] = [];\n  hasNew: boolean;\n}\n\nexport interface Constant {\n  apiUrl: string;\n  tracking: boolean;\n  trackingExcluded: string[];\n  currentEnv: string;\n  currentVersion: string;\n  youtubeApiKey: string;\n  jwtToken: string;\n  lastestUsedVersion: string;\n  defaultUsername: string;\n  defaultPassword: string;\n  localstorage: {LOCALSTORAGE_SELECTEDLANG: string};\n  privateImagesRegex: string;\n  loadingImage: string;\n  emptyAlbum: string;\n  supportMailAddress: string;\n  api: {\n    getSignIn: string;\n    getPatient: string;\n    getAlbum: string;\n    getStory: string;\n    getAsset: string;\n    getUser: string;\n    invite: string;\n  };\n  temp: {\n    albums: string;\n    currentUser: string;\n    currentPatient: string;\n  };\n  methods: {\n    addNewStory: string;\n    addYoutubeStory: string;\n    replaceDescription: string;\n    replaceImage: string;\n    addFileStory: string;\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/shared/types.ts","import {Directive, HostListener} from '@angular/core';\nimport * as screenfull from 'screenfull';\n\n@Directive({\n  selector: '[prismaToggleFullscreen]'\n})\nexport class ToggleFullscreenDirective {\n  @HostListener('click')\n  onClick() {\n    if (screenfull.enabled) {\n      screenfull.toggle();\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/directive/toggleFullscreen.directive.ts","import {Directive, Input, TemplateRef, ViewContainerRef} from '@angular/core';\nimport * as screenfull from 'screenfull';\n\n@Directive({selector: '[prismaIfFullscreen]'})\nexport class IfFullscreenDirective {\n  private hasView = false;\n\n  constructor(\n    private templateRef: TemplateRef<any>,\n    private viewContainer: ViewContainerRef\n  ) {}\n\n  @Input()\n  set prismaIfFullscreen(condition: boolean) {\n    if (this.fullscreenIs(condition) && !this.hasView) {\n      this.viewContainer.createEmbeddedView(this.templateRef);\n      this.hasView = true;\n    } else if (!this.fullscreenIs(condition) && this.hasView) {\n      this.viewContainer.clear();\n      this.hasView = false;\n    }\n  }\n\n  private fullscreenIs(condition: boolean): boolean {\n    return screenfull.enabled ? screenfull.isFullscreen === condition : false;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/directive/ifFullscreen.directive.ts","import {Directive, Input, TemplateRef, ViewContainerRef} from '@angular/core';\nimport {Platform} from 'ionic-angular/platform/platform';\n\n@Directive({selector: '[prismaIfPlatform]'})\nexport class IfPlatformDirective {\n  private hasView = false;\n\n  constructor(\n    private templateRef: TemplateRef<any>,\n    private viewContainer: ViewContainerRef,\n    private platform: Platform\n  ) {}\n\n  @Input()\n  set prismaIfPlatform(id: string) {\n    if (id) {\n      if (this.platformIs(id) && !this.hasView) {\n        this.viewContainer.createEmbeddedView(this.templateRef);\n        this.hasView = true;\n      } else if (!this.platformIs(id) && this.hasView) {\n        this.viewContainer.clear();\n        this.hasView = false;\n      }\n    }\n  }\n\n  private platformIs(id: string): boolean {\n    /* Legal id's:\n      cordova\n      notCordova\n    */\n    switch (id.trim()) {\n      case 'cordova': {\n        return this.platform.is('cordova');\n      }\n      case 'notCordova': {\n        return !this.platform.is('cordova');\n      }\n      default: {\n        return this.platform.is(id);\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/directive/ifPlatform.directive.ts","import {Component} from '@angular/core';\nimport * as screenfull from 'screenfull';\nimport {IfPlatformDirective} from '../directive/ifPlatform.directive';\n\n@Component({\n  template: `\n        <button *prismaIfPlatform='\"notCordova\"' class=\"prisma-fs-button\" (click)=\"toggleFullscreen()\">\n            <img *ngIf=\"!isFullscreen()\" src=\"assets/icon/fs-icon.svg\"/>\n            <img *ngIf=\"isFullscreen()\" src=\"assets/icon/fs-icon-back.svg\"/>\n        </button>\n    `,\n  styles: [\n    `\n        .prisma-fs-button {\n            background: none;\n            width: 3.5rem;\n        }\n    `\n  ],\n  selector: 'prisma-fullscreen-button'\n})\nexport class FullscreenButtonComponent {\n  isFullscreen(): boolean {\n    return screenfull.isFullscreen;\n  }\n\n  toggleFullscreen(): void {\n    screenfull.toggle();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/component/fullscreenButton.component.ts","import {NgModule} from '@angular/core';\nimport {AlbumListComponent} from './albumList.component';\nimport {SharedModule} from '../shared/shared.module';\n\nconst imports = [SharedModule];\nconst declarations = [AlbumListComponent];\n\n@NgModule({\n  declarations,\n  imports,\n  providers: [],\n  entryComponents: [AlbumListComponent],\n  exports: [...imports, ...declarations]\n})\nexport class AlbumModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/albumList/album.module.ts","import {NgModule} from '@angular/core';\nimport {SharedModule} from '../shared/shared.module';\nimport {StoryListComponent} from './storyList.component';\nimport {QuestionComponent} from './component/question/question.component';\nimport {StoryDetailsComponent} from './component/storyDetail/storyDetail.component';\nimport {StoryOptionsComponent} from './component/storyDetail/component/storyOptions.component';\nimport {StoryListOptionsComponent} from './component/storyListOptions.component';\nimport {CreateOrUpdateStoryComponent} from './component/createOrUpdateStory/createOrUpdateStory.component';\nimport {TopicPopoverComponent} from './component/topic-popover/topic-popover.component';\nimport {PrintListComponent} from './printList.component';\n\nconst imports = [SharedModule];\nconst declarations = [\n  StoryListComponent,\n  PrintListComponent,\n  StoryDetailsComponent,\n  StoryOptionsComponent,\n  QuestionComponent,\n  StoryListOptionsComponent,\n  CreateOrUpdateStoryComponent,\n  TopicPopoverComponent\n];\n\n@NgModule({\n  declarations,\n  imports,\n  providers: [],\n  entryComponents: [\n    StoryListComponent,\n    PrintListComponent,\n    StoryDetailsComponent,\n    StoryOptionsComponent,\n    StoryListOptionsComponent,\n    CreateOrUpdateStoryComponent,\n    TopicPopoverComponent\n  ],\n  exports: [...imports, ...declarations]\n})\nexport class StoryModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/storyList/story.module.ts","import {Component, Input, OnInit} from '@angular/core';\nimport {TopicService} from '../../../core/topic.service';\n\n@Component({\n  selector: 'prisma-question',\n  template: `\n    <div *ngIf=\"hasTopics()\">\n      <div class=\"clear\">\n      <div class=\"topic-wrapper\" *ngIf=\"hasTopics()\" (click)=\"nextQuestion()\">\n        <div class=\"topic-container\" *ngIf=\"currentQuestion\">\n          <span class=\"topic-sub\">Onderwerp</span>\n          <span class=\"topic-title\">{{currentQuestion}}</span>\n          <span class=\"topic-other\">\n            <ion-icon name=\"refresh\"></ion-icon>\n            &nbsp;Ander onderwerp\n          </span>\n        </div>\n      </div>\n      </div>\n    </div>\n  `\n})\nexport class QuestionComponent implements OnInit {\n  questions: string[] = [];\n  currentQuestion = '';\n\n  @Input() query: string;\n\n  hasTopics(): boolean {\n    return this.questions.length > 0;\n  }\n\n  constructor(private questionService: TopicService) {}\n\n  ngOnInit(): void {\n    this.questions = this.questionService.getQuestions(this.query);\n    this.nextQuestion();\n  }\n\n  nextQuestion() {\n    this.currentQuestion = this.questions[\n      Math.floor(Math.random() * this.questions.length)\n    ];\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/storyList/component/question/question.component.ts","import {NgModule} from '@angular/core';\nimport {SharedModule} from '../shared/shared.module';\nimport {SidebarComponent} from './sidebar.component';\nimport {InviteComponent} from './component/invite/invite';\nimport {GiveFeedbackComponent} from './component/giveFeedback/giveFeedback.component';\n\nconst imports = [SharedModule];\nconst declarations = [SidebarComponent, InviteComponent, GiveFeedbackComponent];\n\n@NgModule({\n  declarations,\n  imports,\n  providers: [],\n  entryComponents: [GiveFeedbackComponent, InviteComponent],\n  exports: [...imports, ...declarations]\n})\nexport class SidebarModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/sidebar/sidebar.module.ts","import {Component, Input} from '@angular/core';\nimport {MenuController} from 'ionic-angular';\nimport {AuthenticationService} from '../core/authentication.service';\nimport {InviteComponent} from './component/invite/invite';\nimport {PatientService} from '../core/patient.service';\nimport {GiveFeedbackComponent} from './component/giveFeedback/giveFeedback.component';\nimport {NavController} from 'ionic-angular/navigation/nav-controller';\nimport {IntroComponent} from '../auth/components/intro/intro.component';\nimport {UserService} from '../core/user.service';\nimport {AppComponent} from '../app.component';\nimport {App} from 'ionic-angular/components/app/app';\nimport {RootComponent} from '../root.component';\n\n@Component({\n  selector: 'prisma-sidebar',\n  template: `<ion-menu [content]=\"content\" color=\"white\">\n    <ion-content>\n      <ion-toolbar color=\"white\">\n        <ion-title class=\"ion-title-color\">Menu</ion-title>\n      </ion-toolbar>\n      <ion-list>\n        <button ion-item (click)=\"invite()\" class=\"ion-menu-buttons\">\n          <ion-icon name=\"person-add\" color=\"general\"></ion-icon>\n          Nodig iemand uit\n        </button>\n        <button ion-item (click)=\"goToFeedbackPage()\" class=\"ion-menu-buttons\">\n          <ion-icon name=\"mail\" color=\"general\"></ion-icon>\n          Geef feedback\n        </button>\n        <button *ngIf=\"isRegistered\"ion-item (click)=\"logout()\" class=\"ion-menu-buttons\">\n          <ion-icon name=\"exit\" color=\"general\"></ion-icon>\n          Afmelden\n        </button>\n        <button *ngIf=\"!isRegistered\"ion-item (click)=\"logout()\" class=\"ion-menu-buttons\">\n        <ion-icon name=\"exit\" color=\"general\"></ion-icon>\n          Aanmelden of registeren\n        </button>\n      </ion-list>\n    </ion-content>\n  </ion-menu>\n  `,\n  styles: [\n    `\n      .ion-title-color {\n        color: #FFABAEB4\n      }\n    `\n  ]\n})\nexport class SidebarComponent {\n  @Input() nav: NavController;\n\n  @Input() content;\n\n  isRegistered: boolean;\n\n  constructor(\n    public menu: MenuController,\n    public authService: AuthenticationService,\n    public userService: UserService,\n    public patientService: PatientService,\n    public appCtrl: App\n  ) {\n    this.userService.isRegistered.subscribe(bool => (this.isRegistered = bool));\n  }\n\n  logout() {\n    this.menu.close();\n    this.authService.logout();\n    this.nav.setRoot(RootComponent, {isLogging: true});\n  }\n\n  invite() {\n    this.menu.close();\n    this.nav.push(InviteComponent, {\n      patientId: this.patientService.getCurrentPatient().patient_id\n    });\n  }\n\n  goToFeedbackPage() {\n    this.nav.push(GiveFeedbackComponent);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/sidebar/sidebar.component.ts"],"sourceRoot":""}